{"ast":null,"code":"\"undefined\" != typeof window && (window.__CRAFTJS__ || (window.__CRAFTJS__ = {}), window.__CRAFTJS__[\"@craftjs/layers\"] = \"0.2.7\");\nimport { useCollector as e, wrapConnectorHooks as t, RenderIndicator as n, useMethods as r, ROOT_NODE as a } from \"@craftjs/utils\";\nimport * as o from \"react\";\nimport i, { createContext as d, useContext as c, useMemo as s, useState as l, useLayoutEffect as p, useRef as u, useEffect as f, useCallback as v } from \"react\";\nimport { useEditor as g, ROOT_NODE as h, DerivedCoreEventHandlers as m, useEventHandler as y } from \"@craftjs/core\";\nimport { styled as b } from \"styled-components\";\nimport x from \"react-contenteditable\";\nconst w = i.createContext({}),\n  E = d({});\nfunction O(t) {\n  const {\n      store: n\n    } = c(E),\n    r = e(n, t);\n  return s(() => ({\n    store: n,\n    ...r\n  }), [n, r]);\n}\nfunction C(e) {\n  const {\n      id: n,\n      depth: r,\n      connectors: a\n    } = c(w),\n    {\n      actions: o,\n      ...i\n    } = O(t => n && t.layers[n] && e && e(t.layers[n])),\n    {\n      children: d\n    } = g((e, t) => ({\n      children: e.nodes[n] && t.node(n).descendants()\n    })),\n    l = s(() => ({\n      toggleLayer: () => o.toggleLayer(n),\n      setExpandedState: e => o.setExpandedState(n, e)\n    }), [o, n]),\n    p = s(() => t({\n      layer: e => a.layer(e, n),\n      drag: e => a.drag(e, n),\n      layerHeader: e => a.layerHeader(e, n)\n    }), [a, n]);\n  return {\n    id: n,\n    depth: r,\n    children: d,\n    actions: l,\n    connectors: p,\n    ...i\n  };\n}\nconst j = () => {\n    const {\n        id: e,\n        depth: t,\n        children: n,\n        expanded: r\n      } = C(e => ({\n        expanded: e.expanded\n      })),\n      {\n        data: a,\n        shouldBeExpanded: o\n      } = g((t, n) => {\n        const r = n.getEvent(\"selected\").first();\n        return {\n          data: t.nodes[e] && t.nodes[e].data,\n          shouldBeExpanded: r && n.node(r).ancestors(!0).includes(e)\n        };\n      }),\n      {\n        actions: {\n          registerLayer: d,\n          toggleLayer: c\n        },\n        renderLayer: s,\n        expandRootOnLoad: v\n      } = O(e => ({\n        renderLayer: e.options.renderLayer,\n        expandRootOnLoad: e.options.expandRootOnLoad\n      })),\n      [m, y] = l(!1);\n    p(() => {\n      d(e), y(!0);\n    }, [d, e]);\n    const b = u(r);\n    b.current = r;\n    const x = u(v && e === h);\n    return f(() => {\n      !b.current && o && c(e);\n    }, [c, e, o]), f(() => {\n      x.current && c(e);\n    }, [c, e]), a && m ? i.createElement(\"div\", {\n      className: `craft-layer-node ${e}`\n    }, i.createElement(s, {}, n && r ? n.map(e => i.createElement(L, {\n      key: e,\n      id: e,\n      depth: t + 1\n    })) : null)) : null;\n  },\n  $ = d(null),\n  L = ({\n    id: e,\n    depth: n\n  }) => {\n    const r = c($),\n      {\n        store: a\n      } = c(E);\n    u(a).current = a;\n    const o = s(() => r.createConnectorsUsage(), [r]),\n      d = s(() => t(o.connectors), [o]);\n    f(() => (o.register(), () => {\n      o.cleanup();\n    }), [o]);\n    const {\n      exists: l\n    } = g(t => ({\n      exists: !!t.nodes[e]\n    }));\n    return l ? i.createElement(w.Provider, {\n      value: {\n        id: e,\n        depth: n,\n        connectors: d\n      }\n    }, i.createElement(j, null)) : null;\n  },\n  P = e => ({\n    setLayerEvent: (t, n) => {\n      if (null !== n && !e.layers[n]) return;\n      const r = e.events[t];\n      r && n !== r && (e.layers[r].event[t] = !1), n ? (e.layers[n].event[t] = !0, e.events[t] = n) : e.events[t] = null;\n    },\n    registerLayer: t => {\n      e.layers[t] || (e.layers[t] = {\n        dom: null,\n        headingDom: null,\n        expanded: !1,\n        id: t,\n        event: {\n          selected: !1,\n          hovered: !1\n        }\n      });\n    },\n    setDOM: (t, n) => {\n      e.layers[t] = {\n        ...e.layers[t],\n        ...(n.dom ? {\n          dom: n.dom\n        } : {}),\n        ...(n.headingDom ? {\n          headingDom: n.headingDom\n        } : {})\n      };\n    },\n    toggleLayer: t => {\n      e.layers[t].expanded = !e.layers[t].expanded;\n    },\n    setExpandedState: (t, n) => {\n      e.layers[t].expanded = n;\n    },\n    setIndicator: t => {\n      e.events.indicator = t;\n    }\n  });\nfunction _(e, t) {\n  var n = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var r = Object.getOwnPropertySymbols(e);\n    t && (r = r.filter(function (t) {\n      return Object.getOwnPropertyDescriptor(e, t).enumerable;\n    })), n.push.apply(n, r);\n  }\n  return n;\n}\nfunction D(e) {\n  for (var t = 1; t < arguments.length; t++) {\n    var n = null != arguments[t] ? arguments[t] : {};\n    t % 2 ? _(Object(n), !0).forEach(function (t) {\n      k(e, t, n[t]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : _(Object(n)).forEach(function (t) {\n      Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t));\n    });\n  }\n  return e;\n}\nfunction k(e, t, n) {\n  return (t = H(t)) in e ? Object.defineProperty(e, t, {\n    value: n,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[t] = n, e;\n}\nfunction R(e) {\n  return R = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) {\n    return e.__proto__ || Object.getPrototypeOf(e);\n  }, R(e);\n}\nfunction N(e, t) {\n  return N = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {\n    return e.__proto__ = t, e;\n  }, N(e, t);\n}\nfunction H(e) {\n  var t = function (e, t) {\n    if (\"object\" != typeof e || null === e) return e;\n    var n = e[Symbol.toPrimitive];\n    if (void 0 !== n) {\n      var r = n.call(e, \"string\");\n      if (\"object\" != typeof r) return r;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return String(e);\n  }(e);\n  return \"symbol\" == typeof t ? t : String(t);\n}\nvar S = function (e) {\n  !function (e, t) {\n    if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function\");\n    e.prototype = Object.create(t && t.prototype, {\n      constructor: {\n        value: e,\n        writable: !0,\n        configurable: !0\n      }\n    }), Object.defineProperty(e, \"prototype\", {\n      writable: !1\n    }), t && N(e, t);\n  }(i, m);\n  var t,\n    n,\n    r,\n    a,\n    o = (r = i, a = function () {\n      if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n      if (Reflect.construct.sham) return !1;\n      if (\"function\" == typeof Proxy) return !0;\n      try {\n        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;\n      } catch (e) {\n        return !1;\n      }\n    }(), function () {\n      var e,\n        t = R(r);\n      if (a) {\n        var n = R(this).constructor;\n        e = Reflect.construct(t, arguments, n);\n      } else e = t.apply(this, arguments);\n      return function (e, t) {\n        if (t && (\"object\" == typeof t || \"function\" == typeof t)) return t;\n        if (void 0 !== t) throw new TypeError(\"Derived constructors may only return object or undefined\");\n        return function (e) {\n          if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n          return e;\n        }(e);\n      }(this, e);\n    });\n  function i() {\n    return function (e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }(this, i), o.apply(this, arguments);\n  }\n  return t = i, (n = [{\n    key: \"getLayer\",\n    value: function (e) {\n      return this.options.layerStore.getState().layers[e];\n    }\n  }, {\n    key: \"handlers\",\n    value: function () {\n      var e = this,\n        t = this.derived.options.store,\n        n = this.options.layerStore;\n      return {\n        layer: function (r, a) {\n          n.actions.setDOM(a, {\n            dom: r\n          });\n          var o = e.inherit(function (e) {\n              e.select(r, a), e.hover(r, a), e.drag(r, a);\n            }),\n            d = e.addCraftEventListener(r, \"mouseover\", function (e) {\n              e.craft.stopPropagation(), n.actions.setLayerEvent(\"hovered\", a);\n            }),\n            c = null;\n          e.derived.options.removeHoverOnMouseleave && (c = e.addCraftEventListener(r, \"mouseleave\", function (e) {\n            e.craft.stopPropagation(), n.actions.setLayerEvent(\"hovered\", null);\n          }));\n          var s = e.addCraftEventListener(r, \"dragover\", function (r) {\n              r.craft.stopPropagation(), r.preventDefault();\n              var a = i.events,\n                o = a.indicator,\n                d = a.currentCanvasHovered;\n              if (d && o) {\n                var c = e.getLayer(d.id).headingDom.getBoundingClientRect();\n                if (r.clientY > c.top + 10 && r.clientY < c.bottom - 10) {\n                  var s = d.data.nodes[d.data.nodes.length - 1];\n                  if (!s) return void (i.events.indicator = D(D({}, o), {}, {\n                    placement: D(D({}, o.placement), {}, {\n                      index: 0,\n                      where: \"before\",\n                      parent: d\n                    }),\n                    onCanvas: !0\n                  }));\n                  i.events.indicator = D(D({}, o), {}, {\n                    placement: {\n                      currentNode: t.query.node(s).get(),\n                      index: d.data.nodes.length,\n                      where: \"after\",\n                      parent: d\n                    },\n                    onCanvas: !0\n                  }), n.actions.setIndicator(i.events.indicator);\n                }\n              }\n            }),\n            l = e.addCraftEventListener(r, \"dragenter\", function (r) {\n              r.craft.stopPropagation(), r.preventDefault();\n              var o = i.draggedElement;\n              if (o) {\n                var d = t.query.getDropPlaceholder(o, a, {\n                  x: r.clientX,\n                  y: r.clientY\n                }, function (t) {\n                  var n = e.getLayer(t.id);\n                  return n && n.dom;\n                });\n                if (d) {\n                  var c = d.placement.parent,\n                    s = e.getLayer(c.id).headingDom.getBoundingClientRect();\n                  if (i.events.currentCanvasHovered = null, t.query.node(c.id).isCanvas() && c.data.parent) {\n                    var l = t.query.node(c.data.parent).get();\n                    t.query.node(l.id).isCanvas() && (i.events.currentCanvasHovered = c, (r.clientY > s.bottom - 10 && !e.getLayer(c.id).expanded || r.clientY < s.top + 10) && (d.placement.parent = l, d.placement.currentNode = c, d.placement.index = l.data.nodes ? l.data.nodes.indexOf(c.id) : 0, r.clientY > s.bottom - 10 && !e.getLayer(c.id).expanded ? d.placement.where = \"after\" : r.clientY < s.top + 10 && (d.placement.where = \"before\")));\n                  }\n                  i.events.indicator = D(D({}, d), {}, {\n                    onCanvas: !1\n                  }), n.actions.setIndicator(i.events.indicator);\n                }\n              }\n            });\n          return function () {\n            o(), d(), s(), l(), c && c();\n          };\n        },\n        layerHeader: function (e, t) {\n          n.actions.setDOM(t, {\n            headingDom: e\n          });\n        },\n        drag: function (r, a) {\n          r.setAttribute(\"draggable\", \"true\");\n          var o = e.addCraftEventListener(r, \"dragstart\", function (e) {\n              e.craft.stopPropagation(), i.draggedElement = a;\n            }),\n            d = e.addCraftEventListener(r, \"dragend\", function (e) {\n              e.craft.stopPropagation();\n              var r = i.events;\n              if (r.indicator && !r.indicator.error) {\n                var a = r.indicator.placement;\n                t.actions.move(i.draggedElement, a.parent.id, a.index + (\"after\" === a.where ? 1 : 0));\n              }\n              i.draggedElement = null, i.events.indicator = null, n.actions.setIndicator(null);\n            });\n          return function () {\n            r.removeAttribute(\"draggable\"), o(), d();\n          };\n        }\n      };\n    }\n  }]) && function (e, t) {\n    for (var n = 0; n < t.length; n++) {\n      var r = t[n];\n      r.enumerable = r.enumerable || !1, r.configurable = !0, \"value\" in r && (r.writable = !0), Object.defineProperty(e, H(r.key), r);\n    }\n  }(t.prototype, n), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), i;\n}();\nk(S, \"draggedElement\", void 0), k(S, \"events\", {\n  indicator: null,\n  currentCanvasHovered: null\n});\nconst B = ({\n    children: e\n  }) => {\n    const {\n        layers: t,\n        events: r\n      } = O(e => e),\n      {\n        query: a\n      } = g(e => ({\n        enabled: e.options.enabled\n      })),\n      {\n        indicator: o\n      } = a.getOptions(),\n      d = s(() => {\n        const {\n          indicator: e\n        } = r;\n        if (e) {\n          const {\n              placement: {\n                where: n,\n                parent: r,\n                currentNode: a\n              },\n              error: i\n            } = e,\n            d = a ? a.id : r.id;\n          let c;\n          const s = i ? o.error : o.success;\n          if (e.onCanvas && null != t[r.id].dom) {\n            const e = t[r.id].dom.getBoundingClientRect(),\n              n = t[r.id].headingDom.getBoundingClientRect();\n            return {\n              top: n.top,\n              left: e.left,\n              width: e.width,\n              height: n.height,\n              background: \"transparent\",\n              borderWidth: \"1px\",\n              borderColor: s\n            };\n          }\n          {\n            if (!t[d]) return;\n            const e = t[d].headingDom.getBoundingClientRect(),\n              r = t[d].dom.getBoundingClientRect();\n            return c = \"after\" !== n && a ? r.top : r.top + r.height, {\n              top: c,\n              left: e.left,\n              width: r.width + r.left - e.left,\n              height: 2,\n              borderWidth: 0,\n              background: s\n            };\n          }\n        }\n      }, [r, o.error, o.success, t]);\n    return i.createElement(\"div\", null, r.indicator ? i.createElement(n, {\n      style: d\n    }) : null, e);\n  },\n  M = ({\n    children: e\n  }) => {\n    const {\n        store: t\n      } = O(),\n      n = y(),\n      r = s(() => n.derive(S, {\n        layerStore: t\n      }), [n, t]);\n    return i.createElement($.Provider, {\n      value: r\n    }, i.createElement(B, null), e);\n  },\n  T = () => {\n    const {\n        id: e\n      } = C(),\n      {\n        displayName: t,\n        actions: n\n      } = g(t => ({\n        displayName: t.nodes[e] && t.nodes[e].data.custom.displayName ? t.nodes[e].data.custom.displayName : t.nodes[e].data.displayName,\n        hidden: t.nodes[e] && t.nodes[e].data.hidden\n      })),\n      [r, a] = l(!1),\n      o = u(null),\n      d = v(e => {\n        o.current && !o.current.contains(e.target) && a(!1);\n      }, []);\n    return f(() => () => {\n      window.removeEventListener(\"click\", d);\n    }, [d]), i.createElement(x, {\n      html: t,\n      disabled: !r,\n      ref: e => {\n        e && (o.current = e.el.current, window.removeEventListener(\"click\", d), window.addEventListener(\"click\", d));\n      },\n      onChange: t => {\n        n.setCustom(e, e => e.displayName = t.target.value);\n      },\n      tagName: \"h2\",\n      onDoubleClick: () => {\n        r || a(!0);\n      }\n    });\n  };\nvar z;\nfunction A() {\n  return A = Object.assign ? Object.assign.bind() : function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var n = arguments[t];\n      for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);\n    }\n    return e;\n  }, A.apply(this, arguments);\n}\nvar Y,\n  q,\n  I = function (e) {\n    return o.createElement(\"svg\", A({\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 10 6\"\n    }, e), z || (z = o.createElement(\"path\", {\n      d: \"M9.99 1.01A1 1 0 0 0 8.283.303L5 3.586 1.717.303A1 1 0 1 0 .303 1.717l3.99 3.98a1 1 0 0 0 1.414 0l3.99-3.98a.997.997 0 0 0 .293-.707Z\"\n    })));\n  };\nfunction F() {\n  return F = Object.assign ? Object.assign.bind() : function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var n = arguments[t];\n      for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);\n    }\n    return e;\n  }, F.apply(this, arguments);\n}\nvar J,\n  V,\n  Z = function (e) {\n    return o.createElement(\"svg\", F({\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: 16,\n      height: 16\n    }, e), Y || (Y = o.createElement(\"path\", {\n      fill: \"none\",\n      d: \"M0 0h24v24H0z\"\n    })), q || (q = o.createElement(\"path\", {\n      d: \"M1.181 12C2.121 6.88 6.608 3 12 3c5.392 0 9.878 3.88 10.819 9-.94 5.12-5.427 9-10.819 9-5.392 0-9.878-3.88-10.819-9zM12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm0-2a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\"\n    })));\n  };\nfunction W() {\n  return W = Object.assign ? Object.assign.bind() : function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var n = arguments[t];\n      for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);\n    }\n    return e;\n  }, W.apply(this, arguments);\n}\nvar U = function (e) {\n  return o.createElement(\"svg\", W({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 18 18\"\n  }, e), J || (J = o.createElement(\"path\", {\n    className: \"linked_svg__a\",\n    d: \"M16.5 9h-1a.5.5 0 0 0-.5.5V15H3V3h5.5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-7a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5Z\"\n  })), V || (V = o.createElement(\"path\", {\n    className: \"linked_svg__a\",\n    d: \"M16.75 1h-5.373a.4.4 0 0 0-.377.4.392.392 0 0 0 .117.28l1.893 1.895-3.52 3.521a.5.5 0 0 0 0 .707l.706.708a.5.5 0 0 0 .708 0l3.521-3.521 1.893 1.892A.39.39 0 0 0 16.6 7a.4.4 0 0 0 .4-.377V1.25a.25.25 0 0 0-.25-.25Z\"\n  })));\n};\nconst X = b.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 4px 10px;\n  background: ${e => e.$selected ? \"#2680eb\" : \"transparent\"};\n  color: ${e => e.$selected ? \"#fff\" : \"inherit\"};\n  svg {\n    fill: ${e => e.$selected ? \"#fff\" : \"#808184\"};\n    margin-top: 2px;\n  }\n  .inner {\n    flex: 1;\n    > div {\n      padding: 0px;\n      flex: 1;\n      display: flex;\n      margin-left: ${e => 10 * e.$depth}px;\n      align-items: center;\n      div.layer-name {\n        flex: 1;\n        h2 {\n          font-size: 15px;\n          line-height: 26px;\n        }\n      }\n    }\n  }\n`,\n  G = b.a`\n  width: 8px;\n  height: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform-origin: center;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  transform: rotate(${e => e.$expanded ? 180 : 0}deg);\n  opacity: 0.7;\n  cursor: pointer;\n`,\n  K = b.a`\n  width: 14px;\n  height: 14px;\n  margin-right: 10px;\n  position: relative;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  cursor: pointer;\n\n  svg {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n    opacity: ${e => e.$isHidden ? .2 : 1};\n  }\n  &:after {\n    content: ' ';\n    width: 2px;\n    height: ${e => e.$isHidden ? 100 : 0}%;\n    position: absolute;\n    left: 2px;\n    top: 3px;\n    background: ${e => e.$selected ? \"#fff\" : \"#808184\"};\n    transform: rotate(-45deg);\n    transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n    transform-origin: 0% 0%;\n    opacity: ${e => e.$isHidden ? .4 : 1};\n  }\n`,\n  Q = b.div`\n  margin-left: -22px;\n  margin-right: 10px;\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`,\n  ee = () => {\n    const {\n        id: e,\n        depth: t,\n        expanded: n,\n        children: r,\n        connectors: {\n          drag: a,\n          layerHeader: o\n        },\n        actions: {\n          toggleLayer: d\n        }\n      } = C(e => ({\n        expanded: e.expanded\n      })),\n      {\n        hidden: c,\n        actions: s,\n        selected: l,\n        topLevel: p\n      } = g((t, n) => {\n        const r = n.getEvent(\"selected\").first() === e;\n        return {\n          hidden: t.nodes[e] && t.nodes[e].data.hidden,\n          selected: r,\n          topLevel: n.node(e).isTopLevelCanvas()\n        };\n      });\n    return i.createElement(X, {\n      $selected: l,\n      ref: e => {\n        a(e);\n      },\n      $depth: t\n    }, i.createElement(K, {\n      $selected: l,\n      $isHidden: c,\n      onClick: () => s.setHidden(e, !c)\n    }, i.createElement(Z, null)), i.createElement(\"div\", {\n      className: \"inner\"\n    }, i.createElement(\"div\", {\n      ref: e => {\n        o(e);\n      }\n    }, p ? i.createElement(Q, null, i.createElement(U, null)) : null, i.createElement(\"div\", {\n      className: \"layer-name s\"\n    }, i.createElement(T, null)), i.createElement(\"div\", null, r && r.length ? i.createElement(G, {\n      $expanded: n,\n      onMouseDown: () => d()\n    }, i.createElement(I, null)) : null))));\n  },\n  te = b.div`\n  background: ${e => e.$hovered ? \"#f1f1f1\" : \"transparent\"};\n  display: block;\n  padding-bottom: ${e => e.$hasCanvases && e.$expanded ? 5 : 0}px;\n`,\n  ne = b.div`\n  margin: 0 0 0 ${e => e.$hasCanvases ? 35 : 0}px;\n  background: ${e => e.$hasCanvases ? \"rgba(255, 255, 255, 0.02)\" : \"transparent\"};\n  position: relative;\n\n  ${e => e.$hasCanvases ? '\\n\\n  box-shadow: 0px 0px 44px -1px #00000014;\\n  border-radius: 10px;\\n  margin-right: 5px;\\n  margin-bottom:5px;\\n  margin-top:5px;\\n  > * { overflow:hidden; }\\n    &:before {\\n      position:absolute;\\n      left:-19px;\\n      width: 2px;\\n      height:100%;\\n      content: \" \";\\n      background:#00000012;\\n    }\\n  ' : \"\"}\n`,\n  re = ({\n    children: e\n  }) => {\n    const {\n        id: t,\n        expanded: n,\n        hovered: r,\n        connectors: {\n          layer: a\n        }\n      } = C(e => ({\n        hovered: e.event.hovered,\n        expanded: e.expanded\n      })),\n      {\n        hasChildCanvases: o\n      } = g((e, n) => ({\n        hasChildCanvases: n.node(t).isParentOfTopLevelNodes()\n      }));\n    return i.createElement(te, {\n      ref: e => {\n        a(e);\n      },\n      $expanded: n,\n      $hasCanvases: o,\n      $hovered: r\n    }, i.createElement(ee, null), e ? i.createElement(ne, {\n      $hasCanvases: o,\n      className: \"craft-layer-children\"\n    }, e) : null);\n  },\n  ae = ({\n    children: e,\n    options: t\n  }) => {\n    const n = r(P, {\n      layers: {},\n      events: {\n        selected: null,\n        dragged: null,\n        hovered: null\n      },\n      options: {\n        renderLayer: re,\n        ...t\n      }\n    });\n    return i.createElement(E.Provider, {\n      value: {\n        store: n\n      }\n    }, i.createElement(M, null, e));\n  },\n  oe = ({\n    ...e\n  }) => i.createElement(ae, {\n    options: e\n  }, i.createElement(L, {\n    id: a,\n    depth: 0\n  }));\nexport { re as DefaultLayer, ee as DefaultLayerHeader, T as EditableLayerName, oe as Layers, C as useLayer };","map":{"version":3,"names":["w","i","createContext","E","d","O","t","store","n","c","r","e","s","C","id","depth","connectors","a","actions","o","layers","children","g","nodes","node","descendants","l","toggleLayer","setExpandedState","p","layer","drag","layerHeader","j","LayerNode","expanded","data","shouldBeExpanded","getEvent","first","ancestors","includes","registerLayer","renderLayer","expandRootOnLoad","v","options","m","y","b","u","current","x","h","f","createElement","className","map","L","key","$","LayerContextProvider","createConnectorsUsage","register","cleanup","exists","Provider","value","P","setLayerEvent","events","event","dom","headingDom","selected","hovered","setDOM","setIndicator","indicator","_","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","D","arguments","length","forEach","k","getOwnPropertyDescriptors","defineProperties","defineProperty","H","configurable","writable","R","setPrototypeOf","getPrototypeOf","bind","__proto__","N","Symbol","toPrimitive","call","TypeError","String","S","prototype","create","constructor","Reflect","construct","sham","Proxy","Boolean","valueOf","ReferenceError","layerStore","getState","derived","inherit","select","hover","addCraftEventListener","craft","stopPropagation","removeHoverOnMouseleave","preventDefault","currentCanvasHovered","getLayer","getBoundingClientRect","clientY","top","bottom","placement","index","where","parent","onCanvas","currentNode","query","get","draggedElement","getDropPlaceholder","clientX","isCanvas","indexOf","setAttribute","error","move","removeAttribute","B","RenderLayerIndicator","enabled","getOptions","success","left","width","height","background","borderWidth","borderColor","style","M","LayerEventContextProvider","derive","T","EditableLayerName","displayName","custom","hidden","contains","target","window","removeEventListener","html","disabled","ref","el","addEventListener","onChange","setCustom","tagName","onDoubleClick","z","A","assign","hasOwnProperty","Y","q","I","SvgArrow","xmlns","viewBox","F","J","V","Z","SvgEye","fill","W","U","SvgLinked","X","div","$selected","$depth","G","$expanded","K","$isHidden","Q","ee","DefaultLayerHeader","topLevel","isTopLevelCanvas","onClick","setHidden","onMouseDown","te","$hovered","$hasCanvases","ne","re","DefaultLayer","hasChildCanvases","isParentOfTopLevelNodes","ae","LayerManagerProvider","dragged","oe","Layers","useLayer"],"sources":["/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/layers/LayerContext.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/manager/context.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/manager/useLayerManager.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/layers/useLayer.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/layers/LayerNode.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/events/LayerEventContext.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/layers/LayerContextProvider.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/manager/actions.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/events/LayerHandlers.ts","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/events/RenderLayerIndicator.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/events/LayerEventContextProvider.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/layers/DefaultLayer/EditableLayerName.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/layers/DefaultLayer/svg/arrow.svg","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/layers/DefaultLayer/svg/eye.svg","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/layers/DefaultLayer/svg/linked.svg","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/layers/DefaultLayer/DefaultLayerHeader.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/layers/DefaultLayer/DefaultLayer.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/manager/LayerManagerProvider.tsx","/home/adam-noah/app.nextnoetics/client/node_modules/@craftjs/layers/src/index.tsx"],"sourcesContent":["import { NodeId } from '@craftjs/core';\nimport { EventHandlerConnectors } from '@craftjs/utils';\nimport React from 'react';\n\nimport { LayerHandlers } from '../events/LayerHandlers';\n\nexport type LayerContextType = {\n  id: NodeId;\n  depth: number;\n  connectors: EventHandlerConnectors<LayerHandlers, React.ReactElement>;\n};\n\nexport const LayerContext = React.createContext<LayerContextType>(\n  {} as LayerContextType\n);\n","import { SubscriberAndCallbacksFor } from '@craftjs/utils';\nimport { createContext } from 'react';\n\nimport { LayerMethods } from './actions';\n\nexport type LayerStore = SubscriberAndCallbacksFor<typeof LayerMethods>;\nexport type LayerManagerContextType = {\n  store: LayerStore;\n};\n\nexport const LayerManagerContext = createContext<LayerManagerContextType>(\n  {} as LayerManagerContextType\n);\n","import { useCollector } from '@craftjs/utils';\nimport { useContext, useMemo } from 'react';\n\nimport { LayerManagerContext } from './context';\n\nimport { LayerState } from '../interfaces';\n\nexport function useLayerManager<C>(collector?: (state: LayerState) => C) {\n  const { store } = useContext(LayerManagerContext);\n  const collected = useCollector(store, collector);\n\n  return useMemo(\n    () => ({\n      store,\n      ...collected,\n    }),\n    [store, collected]\n  );\n}\n","import { useEditor } from '@craftjs/core';\nimport { wrapConnectorHooks } from '@craftjs/utils';\nimport { useContext, useMemo } from 'react';\n\nimport { LayerContext } from './LayerContext';\n\nimport { Layer } from '../interfaces';\nimport { useLayerManager } from '../manager';\n\nexport function useLayer<S = null>(collect?: (layer: Layer) => S) {\n  const { id, depth, connectors: internalConnectors } = useContext(\n    LayerContext\n  );\n\n  const { actions: managerActions, ...collected } = useLayerManager((state) => {\n    return id && state.layers[id] && collect && collect(state.layers[id]);\n  });\n\n  const { children } = useEditor((state, query) => ({\n    children: state.nodes[id] && query.node(id).descendants(),\n  }));\n\n  const actions = useMemo(() => {\n    return {\n      toggleLayer: () => managerActions.toggleLayer(id),\n      setExpandedState: (expanded: boolean) =>\n        managerActions.setExpandedState(id, expanded),\n    };\n  }, [managerActions, id]);\n\n  const connectors = useMemo(\n    () =>\n      wrapConnectorHooks({\n        layer: (el: HTMLElement) => internalConnectors.layer(el, id),\n        drag: (el: HTMLElement) => internalConnectors.drag(el, id),\n        layerHeader: (el: HTMLElement) =>\n          internalConnectors.layerHeader(el, id),\n      }),\n    [internalConnectors, id]\n  );\n\n  return {\n    id,\n    depth,\n    children,\n    actions,\n    connectors,\n    ...collected,\n  };\n}\n","import { useEditor, ROOT_NODE } from '@craftjs/core';\nimport React, { useRef, useEffect, useLayoutEffect, useState } from 'react';\n\nimport { LayerContextProvider } from './LayerContextProvider';\nimport { useLayer } from './useLayer';\n\nimport { useLayerManager } from '../manager/useLayerManager';\n\nexport const LayerNode = () => {\n  const { id, depth, children, expanded } = useLayer((layer) => ({\n    expanded: layer.expanded,\n  }));\n\n  const { data, shouldBeExpanded } = useEditor((state, query) => {\n    // TODO: handle multiple selected elements\n    const selected = query.getEvent('selected').first();\n\n    return {\n      data: state.nodes[id] && state.nodes[id].data,\n      shouldBeExpanded:\n        selected && query.node(selected).ancestors(true).includes(id),\n    };\n  });\n\n  const {\n    actions: { registerLayer, toggleLayer },\n    renderLayer,\n    expandRootOnLoad,\n  } = useLayerManager((state) => ({\n    renderLayer: state.options.renderLayer,\n    expandRootOnLoad: state.options.expandRootOnLoad,\n  }));\n\n  const [isRegistered, setRegistered] = useState(false);\n\n  useLayoutEffect(() => {\n    registerLayer(id);\n    setRegistered(true);\n  }, [registerLayer, id]);\n\n  const expandedRef = useRef<boolean>(expanded);\n  expandedRef.current = expanded;\n\n  const shouldBeExpandedOnLoad = useRef<boolean>(\n    expandRootOnLoad && id === ROOT_NODE\n  );\n\n  useEffect(() => {\n    if (!expandedRef.current && shouldBeExpanded) {\n      toggleLayer(id);\n    }\n  }, [toggleLayer, id, shouldBeExpanded]);\n\n  useEffect(() => {\n    if (shouldBeExpandedOnLoad.current) {\n      toggleLayer(id);\n    }\n  }, [toggleLayer, id]);\n\n  return data && isRegistered ? (\n    <div className={`craft-layer-node ${id}`}>\n      {React.createElement(\n        renderLayer,\n        {},\n        children && expanded\n          ? children.map((id) => (\n              <LayerContextProvider key={id} id={id} depth={depth + 1} />\n            ))\n          : null\n      )}\n    </div>\n  ) : null;\n};\n","import { createContext, useContext } from 'react';\n\nimport { LayerHandlers } from './LayerHandlers';\n\nexport const LayerEventHandlerContext = createContext<LayerHandlers>(null);\n\nexport const useLayerEventHandler = () => useContext(LayerEventHandlerContext);\n","import { useEditor } from '@craftjs/core';\nimport { wrapConnectorHooks } from '@craftjs/utils';\nimport React, { useMemo, useContext, useRef, useEffect } from 'react';\n\nimport { LayerContext, LayerContextType } from './LayerContext';\nimport { LayerNode } from './LayerNode';\n\nimport { useLayerEventHandler } from '../events/LayerEventContext';\nimport { LayerManagerContext } from '../manager';\n\nexport type LayerContextProviderProps = Omit<LayerContextType, 'connectors'>;\n\nexport const LayerContextProvider = ({\n  id,\n  depth,\n}: LayerContextProviderProps) => {\n  const handlers = useLayerEventHandler();\n\n  const { store } = useContext(LayerManagerContext);\n  const storeRef = useRef(store);\n  storeRef.current = store;\n\n  const connectorsUsage = useMemo(() => handlers.createConnectorsUsage(), [\n    handlers,\n  ]);\n\n  const connectors = useMemo(\n    () => wrapConnectorHooks(connectorsUsage.connectors),\n    [connectorsUsage]\n  );\n\n  useEffect(() => {\n    connectorsUsage.register();\n\n    return () => {\n      connectorsUsage.cleanup();\n    };\n  }, [connectorsUsage]);\n\n  const { exists } = useEditor((state) => ({\n    exists: !!state.nodes[id],\n  }));\n\n  if (!exists) {\n    return null;\n  }\n\n  return (\n    <LayerContext.Provider value={{ id, depth, connectors }}>\n      <LayerNode />\n    </LayerContext.Provider>\n  );\n};\n","import { LayerState, LayerEvents } from '../interfaces';\n\nexport const LayerMethods = (state: LayerState) => ({\n  setLayerEvent: (eventType: LayerEvents, id: string) => {\n    if (id !== null && !state.layers[id]) return;\n\n    const current = state.events[eventType];\n    if (current && id !== current) {\n      state.layers[current].event[eventType] = false;\n    }\n\n    if (id) {\n      state.layers[id].event[eventType] = true;\n      state.events[eventType] = id;\n    } else {\n      state.events[eventType] = null;\n    }\n  },\n  registerLayer: (id: string) => {\n    if (!state.layers[id]) {\n      state.layers[id] = {\n        dom: null,\n        headingDom: null,\n        expanded: false,\n        id,\n        event: {\n          selected: false,\n          hovered: false,\n        },\n      };\n    }\n  },\n  setDOM: (\n    id: string,\n    domCollection: Partial<Record<'dom' | 'headingDom', HTMLElement>>\n  ) => {\n    state.layers[id] = {\n      ...state.layers[id],\n      ...(domCollection.dom ? { dom: domCollection.dom } : {}),\n      ...(domCollection.headingDom\n        ? { headingDom: domCollection.headingDom }\n        : {}),\n    };\n  },\n  toggleLayer: (id: string) => {\n    state.layers[id].expanded = !state.layers[id].expanded;\n  },\n  setExpandedState: (id: string, expanded: boolean) => {\n    state.layers[id].expanded = expanded;\n  },\n  setIndicator: (indicator) => {\n    state.events.indicator = indicator;\n  },\n});\n","import { NodeId, Node, DerivedCoreEventHandlers } from '@craftjs/core';\n\nimport { LayerIndicator } from '../interfaces';\n\nexport class LayerHandlers extends DerivedCoreEventHandlers<{\n  layerStore: any;\n}> {\n  static draggedElement;\n  static events: {\n    indicator: LayerIndicator;\n    currentCanvasHovered: Node;\n  } = {\n    indicator: null,\n    currentCanvasHovered: null,\n  };\n\n  getLayer(id: NodeId) {\n    return this.options.layerStore.getState().layers[id];\n  }\n\n  handlers() {\n    const editorStore = this.derived.options.store;\n    const { layerStore } = this.options;\n    return {\n      layer: (el: HTMLElement, layerId: NodeId) => {\n        layerStore.actions.setDOM(layerId, {\n          dom: el,\n        });\n\n        const cleanupParentConnectors = this.inherit((connectors) => {\n          connectors.select(el, layerId);\n          connectors.hover(el, layerId);\n          connectors.drag(el, layerId);\n        });\n\n        const unbindMouseOver = this.addCraftEventListener(\n          el,\n          'mouseover',\n          (e) => {\n            e.craft.stopPropagation();\n            layerStore.actions.setLayerEvent('hovered', layerId);\n          }\n        );\n\n        let unbindMouseleave: (() => void) | null = null;\n\n        if (this.derived.options.removeHoverOnMouseleave) {\n          unbindMouseleave = this.addCraftEventListener(\n            el,\n            'mouseleave',\n            (e) => {\n              e.craft.stopPropagation();\n              layerStore.actions.setLayerEvent('hovered', null);\n            }\n          );\n        }\n\n        const unbindDragOver = this.addCraftEventListener(\n          el,\n          'dragover',\n          (e) => {\n            e.craft.stopPropagation();\n            e.preventDefault();\n\n            const { indicator, currentCanvasHovered } = LayerHandlers.events;\n\n            if (currentCanvasHovered && indicator) {\n              const heading = this.getLayer(\n                currentCanvasHovered.id\n              ).headingDom.getBoundingClientRect();\n\n              if (\n                e.clientY > heading.top + 10 &&\n                e.clientY < heading.bottom - 10\n              ) {\n                const currNode =\n                  currentCanvasHovered.data.nodes[\n                    currentCanvasHovered.data.nodes.length - 1\n                  ];\n\n                if (!currNode) {\n                  // If the currentCanvasHovered has no child nodes, then we place the indicator as the first child\n                  LayerHandlers.events.indicator = {\n                    ...indicator,\n                    placement: {\n                      ...indicator.placement,\n                      index: 0,\n                      where: 'before',\n                      parent: currentCanvasHovered,\n                    },\n                    onCanvas: true,\n                  };\n                  return;\n                }\n\n                LayerHandlers.events.indicator = {\n                  ...indicator,\n                  placement: {\n                    currentNode: editorStore.query.node(currNode).get(),\n                    index: currentCanvasHovered.data.nodes.length,\n                    where: 'after',\n                    parent: currentCanvasHovered,\n                  },\n                  onCanvas: true,\n                };\n\n                layerStore.actions.setIndicator(LayerHandlers.events.indicator);\n              }\n            }\n          }\n        );\n\n        const unbindDragEnter = this.addCraftEventListener(\n          el,\n          'dragenter',\n          (e) => {\n            e.craft.stopPropagation();\n            e.preventDefault();\n\n            const dragId = LayerHandlers.draggedElement;\n\n            if (!dragId) return;\n\n            let target = layerId;\n\n            const indicatorInfo = editorStore.query.getDropPlaceholder(\n              dragId,\n              target,\n              { x: e.clientX, y: e.clientY },\n              (node) => {\n                const layer = this.getLayer(node.id);\n                return layer && layer.dom;\n              }\n            );\n\n            if (indicatorInfo) {\n              const {\n                placement: { parent },\n              } = indicatorInfo;\n              const parentHeadingInfo = this.getLayer(\n                parent.id\n              ).headingDom.getBoundingClientRect();\n\n              LayerHandlers.events.currentCanvasHovered = null;\n              if (editorStore.query.node(parent.id).isCanvas()) {\n                if (parent.data.parent) {\n                  const grandparent = editorStore.query\n                    .node(parent.data.parent)\n                    .get();\n                  if (editorStore.query.node(grandparent.id).isCanvas()) {\n                    LayerHandlers.events.currentCanvasHovered = parent;\n                    if (\n                      (e.clientY > parentHeadingInfo.bottom - 10 &&\n                        !this.getLayer(parent.id).expanded) ||\n                      e.clientY < parentHeadingInfo.top + 10\n                    ) {\n                      indicatorInfo.placement.parent = grandparent;\n                      indicatorInfo.placement.currentNode = parent;\n                      indicatorInfo.placement.index = grandparent.data.nodes\n                        ? grandparent.data.nodes.indexOf(parent.id)\n                        : 0;\n                      if (\n                        e.clientY > parentHeadingInfo.bottom - 10 &&\n                        !this.getLayer(parent.id).expanded\n                      ) {\n                        indicatorInfo.placement.where = 'after';\n                      } else if (e.clientY < parentHeadingInfo.top + 10) {\n                        indicatorInfo.placement.where = 'before';\n                      }\n                    }\n                  }\n                }\n              }\n\n              LayerHandlers.events.indicator = {\n                ...indicatorInfo,\n                onCanvas: false,\n              };\n\n              layerStore.actions.setIndicator(LayerHandlers.events.indicator);\n            }\n          }\n        );\n\n        return () => {\n          cleanupParentConnectors();\n          unbindMouseOver();\n          unbindDragOver();\n          unbindDragEnter();\n\n          if (!unbindMouseleave) {\n            return;\n          }\n\n          unbindMouseleave();\n        };\n      },\n      layerHeader: (el: HTMLElement, layerId: NodeId) => {\n        layerStore.actions.setDOM(layerId, {\n          headingDom: el,\n        });\n      },\n      drag: (el: HTMLElement, layerId: NodeId) => {\n        el.setAttribute('draggable', 'true');\n\n        const unbindDragStart = this.addCraftEventListener(\n          el,\n          'dragstart',\n          (e) => {\n            e.craft.stopPropagation();\n            LayerHandlers.draggedElement = layerId;\n          }\n        );\n\n        const unbindDragEnd = this.addCraftEventListener(el, 'dragend', (e) => {\n          e.craft.stopPropagation();\n          const events = LayerHandlers.events;\n\n          if (events.indicator && !events.indicator.error) {\n            const { placement } = events.indicator;\n            const { parent, index, where } = placement;\n            const { id: parentId } = parent;\n\n            editorStore.actions.move(\n              LayerHandlers.draggedElement as NodeId,\n              parentId,\n              index + (where === 'after' ? 1 : 0)\n            );\n          }\n\n          LayerHandlers.draggedElement = null;\n          LayerHandlers.events.indicator = null;\n          layerStore.actions.setIndicator(null);\n        });\n\n        return () => {\n          el.removeAttribute('draggable');\n          unbindDragStart();\n          unbindDragEnd();\n        };\n      },\n    };\n  }\n}\n","import { useEditor } from '@craftjs/core';\nimport { RenderIndicator } from '@craftjs/utils';\nimport React, { useMemo } from 'react';\n\nimport { useLayerManager } from '../manager/useLayerManager';\n\ntype RenderLayerIndicatorProps = {\n  children?: React.ReactNode;\n};\n\nexport const RenderLayerIndicator = ({\n  children,\n}: RenderLayerIndicatorProps) => {\n  const { layers, events } = useLayerManager((state) => state);\n  const { query } = useEditor((state) => ({ enabled: state.options.enabled }));\n  const { indicator: indicatorStyles } = query.getOptions();\n\n  const indicatorPosition = useMemo(() => {\n    const { indicator } = events;\n\n    if (indicator) {\n      const {\n        placement: { where, parent, currentNode },\n        error,\n      } = indicator;\n      const layerId = currentNode ? currentNode.id : parent.id;\n\n      let top;\n      const color = error ? indicatorStyles.error : indicatorStyles.success;\n\n      if (indicator.onCanvas && layers[parent.id].dom != null) {\n        const parentPos = layers[parent.id].dom.getBoundingClientRect();\n        const parentHeadingPos = layers[\n          parent.id\n        ].headingDom.getBoundingClientRect();\n        return {\n          top: parentHeadingPos.top,\n          left: parentPos.left,\n          width: parentPos.width,\n          height: parentHeadingPos.height,\n          background: 'transparent',\n          borderWidth: '1px',\n          borderColor: color,\n        };\n      } else {\n        if (!layers[layerId]) return;\n        const headingPos = layers[layerId].headingDom.getBoundingClientRect();\n        const pos = layers[layerId].dom.getBoundingClientRect();\n\n        if (where === 'after' || !currentNode) {\n          top = pos.top + pos.height;\n        } else {\n          top = pos.top;\n        }\n\n        return {\n          top,\n          left: headingPos.left,\n          width: pos.width + pos.left - headingPos.left,\n          height: 2,\n          borderWidth: 0,\n          background: color,\n        };\n      }\n    }\n  }, [events, indicatorStyles.error, indicatorStyles.success, layers]);\n\n  return (\n    <div>\n      {events.indicator\n        ? React.createElement(RenderIndicator, {\n            style: indicatorPosition,\n          })\n        : null}\n      {children}\n    </div>\n  );\n};\n","import { useEventHandler } from '@craftjs/core';\nimport React, { useMemo } from 'react';\n\nimport { LayerEventHandlerContext } from './LayerEventContext';\nimport { LayerHandlers } from './LayerHandlers';\nimport { RenderLayerIndicator } from './RenderLayerIndicator';\n\nimport { useLayerManager } from '../manager';\n\nexport const LayerEventContextProvider = ({ children }) => {\n  const { store: layerStore } = useLayerManager();\n  const coreEventHandler = useEventHandler();\n\n  const handler = useMemo(\n    () =>\n      coreEventHandler.derive(LayerHandlers, {\n        layerStore,\n      }),\n    [coreEventHandler, layerStore]\n  );\n\n  return (\n    <LayerEventHandlerContext.Provider value={handler}>\n      <RenderLayerIndicator />\n      {children}\n    </LayerEventHandlerContext.Provider>\n  );\n};\n","import { useEditor } from '@craftjs/core';\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport ContentEditable from 'react-contenteditable';\n\nimport { useLayer } from '../useLayer';\n\nexport const EditableLayerName = () => {\n  const { id } = useLayer();\n\n  const { displayName, actions } = useEditor((state) => ({\n    displayName:\n      state.nodes[id] && state.nodes[id].data.custom.displayName\n        ? state.nodes[id].data.custom.displayName\n        : state.nodes[id].data.displayName,\n    hidden: state.nodes[id] && state.nodes[id].data.hidden,\n  }));\n\n  const [editingName, setEditingName] = useState(false);\n  const nameDOM = useRef<HTMLElement | null>(null);\n\n  const clickOutside = useCallback((e) => {\n    if (nameDOM.current && !nameDOM.current.contains(e.target)) {\n      setEditingName(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      window.removeEventListener('click', clickOutside);\n    };\n  }, [clickOutside]);\n\n  return (\n    <ContentEditable\n      html={displayName}\n      disabled={!editingName}\n      ref={(ref: any) => {\n        if (ref) {\n          nameDOM.current = ref.el.current;\n          window.removeEventListener('click', clickOutside);\n          window.addEventListener('click', clickOutside);\n        }\n      }}\n      onChange={(e) => {\n        actions.setCustom(\n          id,\n          (custom) => (custom.displayName = e.target.value)\n        );\n      }}\n      tagName=\"h2\"\n      onDoubleClick={() => {\n        if (!editingName) setEditingName(true);\n      }}\n    />\n  );\n};\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 6\">\n  <title>ChevronDownMedium</title>\n  <rect id=\"ToDelete\" fill=\"#ff13dc\" opacity=\"0\" /><path d=\"M9.99,1.01A.9999.9999,0,0,0,8.28266.30327L5,3.58594,1.71734.30327A.9999.9999,0,1,0,.30327,1.71734L4.29266,5.69673a.99965.99965,0,0,0,1.41468,0L9.69673,1.71734A.99669.99669,0,0,0,9.99,1.01Z\" />\n</svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"16\" height=\"16\"><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M1.181 12C2.121 6.88 6.608 3 12 3c5.392 0 9.878 3.88 10.819 9-.94 5.12-5.427 9-10.819 9-5.392 0-9.878-3.88-10.819-9zM12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm0-2a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\">\n  <defs>\n    <!-- <style>\n      .a {\n        fill: #707070;\n      }\n    </style> -->\n  </defs>\n  <title>S LinkOut 18 N</title>\n  <rect id=\"Canvas\" opacity=\"0\" /><path class=\"a\" d=\"M16.5,9h-1a.5.5,0,0,0-.5.5V15H3V3H8.5A.5.5,0,0,0,9,2.5v-1A.5.5,0,0,0,8.5,1h-7a.5.5,0,0,0-.5.5v15a.5.5,0,0,0,.5.5h15a.5.5,0,0,0,.5-.5v-7A.5.5,0,0,0,16.5,9Z\" />\n  <path class=\"a\" d=\"M16.75,1H11.377A.4.4,0,0,0,11,1.4a.392.392,0,0,0,.1175.28l1.893,1.895L9.4895,7.096a.5.5,0,0,0-.00039.70711l.00039.00039.707.707a.5.5,0,0,0,.707,0l3.5215-3.521L16.318,6.882A.39051.39051,0,0,0,16.6,7a.4.4,0,0,0,.4-.377V1.25A.25.25,0,0,0,16.75,1Z\" />\n</svg>","import { useEditor } from '@craftjs/core';\nimport React from 'react';\nimport { styled } from 'styled-components';\n\nimport { EditableLayerName } from './EditableLayerName';\nimport Arrow from './svg/arrow.svg';\nimport Eye from './svg/eye.svg';\nimport Linked from './svg/linked.svg';\n\nimport { useLayer } from '../useLayer';\n\nconst StyledDiv = styled.div<{ $depth: number; $selected: boolean }>`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 4px 10px;\n  background: ${(props) => (props.$selected ? '#2680eb' : 'transparent')};\n  color: ${(props) => (props.$selected ? '#fff' : 'inherit')};\n  svg {\n    fill: ${(props) => (props.$selected ? '#fff' : '#808184')};\n    margin-top: 2px;\n  }\n  .inner {\n    flex: 1;\n    > div {\n      padding: 0px;\n      flex: 1;\n      display: flex;\n      margin-left: ${(props) => props.$depth * 10}px;\n      align-items: center;\n      div.layer-name {\n        flex: 1;\n        h2 {\n          font-size: 15px;\n          line-height: 26px;\n        }\n      }\n    }\n  }\n`;\n\nconst Expand = styled.a<{ $expanded: boolean }>`\n  width: 8px;\n  height: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform-origin: center;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  transform: rotate(${(props) => (props.$expanded ? 180 : 0)}deg);\n  opacity: 0.7;\n  cursor: pointer;\n`;\n\nconst Hide = styled.a<{ $selected: boolean; $isHidden: boolean }>`\n  width: 14px;\n  height: 14px;\n  margin-right: 10px;\n  position: relative;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  cursor: pointer;\n\n  svg {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n    opacity: ${(props) => (props.$isHidden ? 0.2 : 1)};\n  }\n  &:after {\n    content: ' ';\n    width: 2px;\n    height: ${(props) => (props.$isHidden ? 100 : 0)}%;\n    position: absolute;\n    left: 2px;\n    top: 3px;\n    background: ${(props) => (props.$selected ? '#fff' : '#808184')};\n    transform: rotate(-45deg);\n    transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n    transform-origin: 0% 0%;\n    opacity: ${(props) => (props.$isHidden ? 0.4 : 1)};\n  }\n`;\n\nconst TopLevelIndicator = styled.div`\n  margin-left: -22px;\n  margin-right: 10px;\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\nexport const DefaultLayerHeader = () => {\n  const {\n    id,\n    depth,\n    expanded,\n    children,\n    connectors: { drag, layerHeader },\n    actions: { toggleLayer },\n  } = useLayer((layer) => {\n    return {\n      expanded: layer.expanded,\n    };\n  });\n\n  const { hidden, actions, selected, topLevel } = useEditor((state, query) => {\n    // TODO: handle multiple selected elements\n    const selected = query.getEvent('selected').first() === id;\n\n    return {\n      hidden: state.nodes[id] && state.nodes[id].data.hidden,\n      selected,\n      topLevel: query.node(id).isTopLevelCanvas(),\n    };\n  });\n\n  return (\n    <StyledDiv\n      $selected={selected}\n      ref={(dom) => {\n        drag(dom);\n      }}\n      $depth={depth}\n    >\n      <Hide\n        $selected={selected}\n        $isHidden={hidden}\n        onClick={() => actions.setHidden(id, !hidden)}\n      >\n        <Eye />\n      </Hide>\n      <div className=\"inner\">\n        <div\n          ref={(dom) => {\n            layerHeader(dom);\n          }}\n        >\n          {topLevel ? (\n            <TopLevelIndicator>\n              <Linked />\n            </TopLevelIndicator>\n          ) : null}\n\n          <div className=\"layer-name s\">\n            <EditableLayerName />\n          </div>\n          <div>\n            {children && children.length ? (\n              <Expand $expanded={expanded} onMouseDown={() => toggleLayer()}>\n                <Arrow />\n              </Expand>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    </StyledDiv>\n  );\n};\n","import { useEditor } from '@craftjs/core';\nimport React from 'react';\nimport { styled } from 'styled-components';\n\nimport { DefaultLayerHeader } from './DefaultLayerHeader';\n\nimport { useLayer } from '../useLayer';\n\nconst LayerNodeDiv = styled.div<{\n  $expanded: boolean;\n  $hasCanvases: boolean;\n  $hovered: boolean;\n}>`\n  background: ${(props) => (props.$hovered ? '#f1f1f1' : 'transparent')};\n  display: block;\n  padding-bottom: ${(props) =>\n    props.$hasCanvases && props.$expanded ? 5 : 0}px;\n`;\n\nconst LayerChildren = styled.div<{ $hasCanvases: boolean }>`\n  margin: 0 0 0 ${(props) => (props.$hasCanvases ? 35 : 0)}px;\n  background: ${(props) =>\n    props.$hasCanvases ? 'rgba(255, 255, 255, 0.02)' : 'transparent'};\n  position: relative;\n\n  ${(props) =>\n    props.$hasCanvases\n      ? `\n\n  box-shadow: 0px 0px 44px -1px #00000014;\n  border-radius: 10px;\n  margin-right: 5px;\n  margin-bottom:5px;\n  margin-top:5px;\n  > * { overflow:hidden; }\n    &:before {\n      position:absolute;\n      left:-19px;\n      width: 2px;\n      height:100%;\n      content: \" \";\n      background:#00000012;\n    }\n  `\n      : ''}\n`;\n\nexport type DefaultLayerProps = {\n  children?: React.ReactNode;\n};\n\nexport const DefaultLayer = ({ children }: DefaultLayerProps) => {\n  const {\n    id,\n    expanded,\n    hovered,\n    connectors: { layer },\n  } = useLayer((layer) => ({\n    hovered: layer.event.hovered,\n    expanded: layer.expanded,\n  }));\n  const { hasChildCanvases } = useEditor((state, query) => {\n    return {\n      hasChildCanvases: query.node(id).isParentOfTopLevelNodes(),\n    };\n  });\n\n  return (\n    <LayerNodeDiv\n      ref={(dom) => {\n        layer(dom);\n      }}\n      $expanded={expanded}\n      $hasCanvases={hasChildCanvases}\n      $hovered={hovered}\n    >\n      <DefaultLayerHeader />\n      {children ? (\n        <LayerChildren\n          $hasCanvases={hasChildCanvases}\n          className=\"craft-layer-children\"\n        >\n          {children}\n        </LayerChildren>\n      ) : null}\n    </LayerNodeDiv>\n  );\n};\n","import { useMethods } from '@craftjs/utils';\nimport React from 'react';\n\nimport { LayerMethods } from './actions';\nimport { LayerManagerContext, LayerStore } from './context';\n\nimport { LayerEventContextProvider } from '../events';\nimport { LayerOptions } from '../interfaces';\nimport { DefaultLayer } from '../layers';\n\ntype LayerManagerProviderProps = {\n  options: Partial<LayerOptions>;\n  children?: React.ReactNode;\n};\n\nexport const LayerManagerProvider = ({\n  children,\n  options,\n}: LayerManagerProviderProps) => {\n  // TODO: fix type\n  const store = useMethods(LayerMethods, {\n    layers: {},\n    events: {\n      selected: null,\n      dragged: null,\n      hovered: null,\n    },\n    options: {\n      renderLayer: DefaultLayer,\n      ...options,\n    },\n  }) as LayerStore;\n\n  return (\n    <LayerManagerContext.Provider value={{ store }}>\n      <LayerEventContextProvider>{children}</LayerEventContextProvider>\n    </LayerManagerContext.Provider>\n  );\n};\n","import { ROOT_NODE } from '@craftjs/utils';\nimport React from 'react';\n\nimport { LayerOptions } from './interfaces';\nimport { LayerContextProvider } from './layers/LayerContextProvider';\nimport { LayerManagerProvider } from './manager/LayerManagerProvider';\nexport {\n  useLayer,\n  DefaultLayer,\n  DefaultLayerHeader,\n  EditableLayerName,\n} from './layers';\n\ntype LayersProps = Partial<LayerOptions>;\n\nexport const Layers = ({ ...options }: LayersProps) => {\n  return (\n    <LayerManagerProvider options={options}>\n      <LayerContextProvider id={ROOT_NODE} depth={0} />\n    </LayerManagerProvider>\n  );\n};\n"],"mappings":";;;;;;;AAYO,MAAMA,CAAA,GAAeC,CAAA,CAAMC,aAAA,CAChC;ECHWC,CAAA,GAAsBC,CAAA,CACjC;ACJI,SAAUC,EAAmBC,CAAA;EACjC;MAAMC,KAAA,EAAEC;IAAA,IAAUC,CAAA,CAAWN,CAAA;IACvBO,CAAA,GAAYC,CAAA,CAAaH,CAAA,EAAOF,CAAA;EAEtC,OAAOM,CAAA,CACL,OAAO;IACLL,KAAA,EAAAC,CAAA;IAAA,GACGE;EAAA,IAEL,CAACF,CAAA,EAAOE,CAAA,EAEZ;AAAA;ACTM,SAAUG,EAAmBF,CAAA;EACjC;MAAMG,EAAA,EAAEN,CAAA;MAAEO,KAAA,EAAEL,CAAA;MAAOM,UAAA,EAAYC;IAAA,IAAuBR,CAAA,CACpDT,CAAA;IAAA;MAGMkB,OAAA,EAASC,CAAA;MAAA,GAAmBlB;IAAA,IAAcI,CAAA,CAAiBC,CAAA,IAC1DE,CAAA,IAAMF,CAAA,CAAMc,MAAA,CAAOZ,CAAA,KAAOG,CAAA,IAAWA,CAAA,CAAQL,CAAA,CAAMc,MAAA,CAAOZ,CAAA;IAAA;MAG7Da,QAAA,EAAEjB;IAAA,IAAakB,CAAA,CAAU,CAACX,CAAA,EAAOL,CAAA,MAAW;MAChDe,QAAA,EAAUV,CAAA,CAAMY,KAAA,CAAMf,CAAA,KAAOF,CAAA,CAAMkB,IAAA,CAAKhB,CAAA,EAAIiB,WAAA;IAAA;IAGxCC,CAAA,GAAUd,CAAA,CAAQ,OACf;MACLe,WAAA,EAAaA,CAAA,KAAMR,CAAA,CAAeQ,WAAA,CAAYnB,CAAA;MAC9CoB,gBAAA,EAAmBjB,CAAA,IACjBQ,CAAA,CAAeS,gBAAA,CAAiBpB,CAAA,EAAIG,CAAA;IAAA,IAEvC,CAACQ,CAAA,EAAgBX,CAAA;IAEdqB,CAAA,GAAajB,CAAA,CACjB,MACEN,CAAA,CAAmB;MACjBwB,KAAA,EAAQnB,CAAA,IAAoBM,CAAA,CAAmBa,KAAA,CAAMnB,CAAA,EAAIH,CAAA;MACzDuB,IAAA,EAAOpB,CAAA,IAAoBM,CAAA,CAAmBc,IAAA,CAAKpB,CAAA,EAAIH,CAAA;MACvDwB,WAAA,EAAcrB,CAAA,IACZM,CAAA,CAAmBe,WAAA,CAAYrB,CAAA,EAAIH,CAAA;IAAA,IAEzC,CAACS,CAAA,EAAoBT,CAAA;EAGvB,OAAO;IACLM,EAAA,EAAAN,CAAA;IACAO,KAAA,EAAAL,CAAA;IACAW,QAAA,EAAAjB,CAAA;IACAc,OAAA,EAAAQ,CAAA;IACAV,UAAA,EAAAa,CAAA;IAAA,GACG5B;EAAA,CAEP;AAAA;ACzCO,MAAMgC,CAAA,GAAYC,CAAA;IACvB;QAAMpB,EAAA,EAAEH,CAAA;QAAEI,KAAA,EAAET,CAAA;QAAKe,QAAA,EAAEb,CAAA;QAAQ2B,QAAA,EAAEzB;MAAA,IAAaG,CAAA,CAAUF,CAAA,KAAW;QAC7DwB,QAAA,EAAUxB,CAAA,CAAMwB;MAAA;MAAA;QAGZC,IAAA,EAAEnB,CAAA;QAAIoB,gBAAA,EAAElB;MAAA,IAAqBG,CAAA,CAAU,CAAChB,CAAA,EAAOE,CAAA;QAEnD,MAAME,CAAA,GAAWF,CAAA,CAAM8B,QAAA,CAAS,YAAYC,KAAA;QAE5C,OAAO;UACLH,IAAA,EAAM9B,CAAA,CAAMiB,KAAA,CAAMZ,CAAA,KAAOL,CAAA,CAAMiB,KAAA,CAAMZ,CAAA,EAAIyB,IAAA;UACzCC,gBAAA,EACE3B,CAAA,IAAYF,CAAA,CAAMgB,IAAA,CAAKd,CAAA,EAAU8B,SAAA,EAAU,GAAMC,QAAA,CAAS9B,CAAA;QAAA,CAC7D;MAAA;MAAA;QAIDO,OAAA;UAASwB,aAAA,EAAEtC,CAAA;UAAauB,WAAA,EAAElB;QAAA;QAAakC,WAAA,EACvC/B,CAAA;QAAWgC,gBAAA,EACXC;MAAA,IACExC,CAAA,CAAiBM,CAAA,KAAW;QAC9BgC,WAAA,EAAahC,CAAA,CAAMmC,OAAA,CAAQH,WAAA;QAC3BC,gBAAA,EAAkBjC,CAAA,CAAMmC,OAAA,CAAQF;MAAA;MAAA,CAG3BG,CAAA,EAAcC,CAAA,IAAiBtB,CAAA,EAAS;IAE/CG,CAAA,CAAgB;MACdzB,CAAA,CAAcO,CAAA,GACdqC,CAAA,EAAc,EAAK;IAAA,GAClB,CAAC5C,CAAA,EAAeO,CAAA;IAEnB,MAAMsC,CAAA,GAAcC,CAAA,CAAgBxC,CAAA;IACpCuC,CAAA,CAAYE,OAAA,GAAUzC,CAAA;IAEtB,MAAM0C,CAAA,GAAyBF,CAAA,CAC7BL,CAAA,IAAoBlC,CAAA,KAAO0C,CAAA;IAe7B,OAZAC,CAAA,CAAU;MAAA,CACHL,CAAA,CAAYE,OAAA,IAAWhC,CAAA,IAC1BV,CAAA,CAAYE,CAAA,CACb;IAAA,GACA,CAACF,CAAA,EAAaE,CAAA,EAAIQ,CAAA,IAErBmC,CAAA,CAAU;MACJF,CAAA,CAAuBD,OAAA,IACzB1C,CAAA,CAAYE,CAAA,CACb;IAAA,GACA,CAACF,CAAA,EAAaE,CAAA,IAEVM,CAAA,IAAQ8B,CAAA,GACb9C,CAAA,CAAAsD,aAAA;MAAKC,SAAA,EAAW,oBAAoB7C,CAAA;IAAA,GACjCV,CAAA,CAAMsD,aAAA,CACL3C,CAAA,EACA,IACAJ,CAAA,IAAYE,CAAA,GACRF,CAAA,CAASiD,GAAA,CAAK9C,CAAA,IACZV,CAAA,CAAAsD,aAAA,CAACG,CAAA,EAAoB;MAACC,GAAA,EAAKhD,CAAA;MAAIG,EAAA,EAAIH,CAAA;MAAII,KAAA,EAAOT,CAAA,GAAQ;IAAA,MAExD,SAGN,IAAI;EAAA;ECnEGsD,CAAA,GAA2BxD,CAAA,CAA6B;ECQxDsD,CAAA,GAAuBG,CAAA;IAClC/C,EAAA,EAAAH,CAAA;IACAI,KAAA,EAAAP;EAAA;IAEA,MAAME,CAAA,GDVkCD,CAAA,CAAWmD,CAAA;MAAA;QCY7CrD,KAAA,EAAEU;MAAA,IAAUR,CAAA,CAAWN,CAAA;IACZ+C,CAAA,CAAOjC,CAAA,EACfkC,OAAA,GAAUlC,CAAA;IAEnB,MAAME,CAAA,GAAkBP,CAAA,CAAQ,MAAMF,CAAA,CAASoD,qBAAA,IAAyB,CACtEpD,CAAA;MAGIN,CAAA,GAAaQ,CAAA,CACjB,MAAMN,CAAA,CAAmBa,CAAA,CAAgBH,UAAA,GACzC,CAACG,CAAA;IAGHmC,CAAA,CAAU,OACRnC,CAAA,CAAgB4C,QAAA,IAET;MACL5C,CAAA,CAAgB6C,OAAA,EAAS;IAAA,IAE1B,CAAC7C,CAAA;IAEJ;MAAM8C,MAAA,EAAEvC;IAAA,IAAWJ,CAAA,CAAWhB,CAAA,KAAW;MACvC2D,MAAA,IAAU3D,CAAA,CAAMiB,KAAA,CAAMZ,CAAA;IAAA;IAGxB,OAAKe,CAAA,GAKHzB,CAAA,CAAAsD,aAAA,CAACvD,CAAA,CAAakE,QAAA,EAAS;MAAAC,KAAA,EAAO;QAAErD,EAAA,EAAAH,CAAA;QAAII,KAAA,EAAAP,CAAA;QAAOQ,UAAA,EAAAZ;MAAA;IAAA,GACzCH,CAAA,CAAAsD,aAAA,CAACtB,CAAA,EAAS,SALL,IAOP;EAAA;ECjDSmC,CAAA,GAAgBzD,CAAA,KAAuB;IAClD0D,aAAA,EAAeA,CAAC/D,CAAA,EAAwBE,CAAA;MACtC,IAAW,SAAPA,CAAA,KAAgBG,CAAA,CAAMS,MAAA,CAAOZ,CAAA,GAAK;MAEtC,MAAME,CAAA,GAAUC,CAAA,CAAM2D,MAAA,CAAOhE,CAAA;MACzBI,CAAA,IAAWF,CAAA,KAAOE,CAAA,KACpBC,CAAA,CAAMS,MAAA,CAAOV,CAAA,EAAS6D,KAAA,CAAMjE,CAAA,KAAa,IAGvCE,CAAA,IACFG,CAAA,CAAMS,MAAA,CAAOZ,CAAA,EAAI+D,KAAA,CAAMjE,CAAA,KAAa,GACpCK,CAAA,CAAM2D,MAAA,CAAOhE,CAAA,IAAaE,CAAA,IAE1BG,CAAA,CAAM2D,MAAA,CAAOhE,CAAA,IAAa,IAC3B;IAAA;IAEHoC,aAAA,EAAgBpC,CAAA;MACTK,CAAA,CAAMS,MAAA,CAAOd,CAAA,MAChBK,CAAA,CAAMS,MAAA,CAAOd,CAAA,IAAM;QACjBkE,GAAA,EAAK;QACLC,UAAA,EAAY;QACZtC,QAAA,GAAU;QACVrB,EAAA,EAAAR,CAAA;QACAiE,KAAA,EAAO;UACLG,QAAA,GAAU;UACVC,OAAA,GAAS;QAAA;MAAA,EAGd;IAAA;IAEHC,MAAA,EAAQA,CACNtE,CAAA,EACAE,CAAA;MAEAG,CAAA,CAAMS,MAAA,CAAOd,CAAA,IAAM;QAAA,GACdK,CAAA,CAAMS,MAAA,CAAOd,CAAA;QAAA,IACZE,CAAA,CAAcgE,GAAA,GAAM;UAAEA,GAAA,EAAKhE,CAAA,CAAcgE;QAAA,IAAQ;QAAA,IACjDhE,CAAA,CAAciE,UAAA,GACd;UAAEA,UAAA,EAAYjE,CAAA,CAAciE;QAAA,IAC5B;MAAA,CACL;IAAA;IAEH9C,WAAA,EAAcrB,CAAA;MACZK,CAAA,CAAMS,MAAA,CAAOd,CAAA,EAAI6B,QAAA,IAAYxB,CAAA,CAAMS,MAAA,CAAOd,CAAA,EAAI6B,QAAQ;IAAA;IAExDP,gBAAA,EAAkBA,CAACtB,CAAA,EAAYE,CAAA;MAC7BG,CAAA,CAAMS,MAAA,CAAOd,CAAA,EAAI6B,QAAA,GAAW3B,CAAQ;IAAA;IAEtCqE,YAAA,EAAevE,CAAA;MACbK,CAAA,CAAM2D,MAAA,CAAOQ,SAAA,GAAYxE,CAAS;IAAA;EAAA;AAAA,SAAAyE,EAAApE,CAAA,EAAAL,CAAA;EAAA,IAAAE,CAAA,GAAAwE,MAAA,CAAAC,IAAA,CAAAtE,CAAA;EAAA,IAAAqE,MAAA,CAAAE,qBAAA;IAAA,IAAAxE,CAAA,GAAAsE,MAAA,CAAAE,qBAAA,CAAAvE,CAAA;IAAAL,CAAA,KAAAI,CAAA,GAAAA,CAAA,CAAAyE,MAAA,WAAA7E,CAAA;MAAA,OAAA0E,MAAA,CAAAI,wBAAA,CAAAzE,CAAA,EAAAL,CAAA,EAAA+E,UAAA;IAAA,KAAA7E,CAAA,CAAA8E,IAAA,CAAAC,KAAA,CAAA/E,CAAA,EAAAE,CAAA;EAAA;EAAA,OAAAF,CAAA;AAAA;AAAA,SAAAgF,EAAA7E,CAAA;EAAA,SAAAL,CAAA,MAAAA,CAAA,GAAAmF,SAAA,CAAAC,MAAA,EAAApF,CAAA;IAAA,IAAAE,CAAA,WAAAiF,SAAA,CAAAnF,CAAA,IAAAmF,SAAA,CAAAnF,CAAA;IAAAA,CAAA,OAAAyE,CAAA,CAAAC,MAAA,CAAAxE,CAAA,OAAAmF,OAAA,WAAArF,CAAA;MAAAsF,CAAA,CAAAjF,CAAA,EAAAL,CAAA,EAAAE,CAAA,CAAAF,CAAA;IAAA,KAAA0E,MAAA,CAAAa,yBAAA,GAAAb,MAAA,CAAAc,gBAAA,CAAAnF,CAAA,EAAAqE,MAAA,CAAAa,yBAAA,CAAArF,CAAA,KAAAuE,CAAA,CAAAC,MAAA,CAAAxE,CAAA,GAAAmF,OAAA,WAAArF,CAAA;MAAA0E,MAAA,CAAAe,cAAA,CAAApF,CAAA,EAAAL,CAAA,EAAA0E,MAAA,CAAAI,wBAAA,CAAA5E,CAAA,EAAAF,CAAA;IAAA;EAAA;EAAA,OAAAK,CAAA;AAAA;AAAA,SAAAiF,EAAAjF,CAAA,EAAAL,CAAA,EAAAE,CAAA;EAAA,QAAAF,CAAA,GAAA0F,CAAA,CAAA1F,CAAA,MAAAK,CAAA,GAAAqE,MAAA,CAAAe,cAAA,CAAApF,CAAA,EAAAL,CAAA;IAAA6D,KAAA,EAAA3D,CAAA;IAAA6E,UAAA;IAAAY,YAAA;IAAAC,QAAA;EAAA,KAAAvF,CAAA,CAAAL,CAAA,IAAAE,CAAA,EAAAG,CAAA;AAAA;AAAA,SAAAwF,EAAAxF,CAAA;EAAA,OAAAwF,CAAA,GAAAnB,MAAA,CAAAoB,cAAA,GAAApB,MAAA,CAAAqB,cAAA,CAAAC,IAAA,eAAA3F,CAAA;IAAA,OAAAA,CAAA,CAAA4F,SAAA,IAAAvB,MAAA,CAAAqB,cAAA,CAAA1F,CAAA;EAAA,GAAAwF,CAAA,CAAAxF,CAAA;AAAA;AAAA,SAAA6F,EAAA7F,CAAA,EAAAL,CAAA;EAAA,OAAAkG,CAAA,GAAAxB,MAAA,CAAAoB,cAAA,GAAApB,MAAA,CAAAoB,cAAA,CAAAE,IAAA,eAAA3F,CAAA,EAAAL,CAAA;IAAA,OAAAK,CAAA,CAAA4F,SAAA,GAAAjG,CAAA,EAAAK,CAAA;EAAA,GAAA6F,CAAA,CAAA7F,CAAA,EAAAL,CAAA;AAAA;AAAA,SAAA0F,EAAArF,CAAA;EAAA,IAAAL,CAAA,aAAAK,CAAA,EAAAL,CAAA;IAAA,uBAAAK,CAAA,aAAAA,CAAA,SAAAA,CAAA;IAAA,IAAAH,CAAA,GAAAG,CAAA,CAAA8F,MAAA,CAAAC,WAAA;IAAA,eAAAlG,CAAA;MAAA,IAAAE,CAAA,GAAAF,CAAA,CAAAmG,IAAA,CAAAhG,CAAA;MAAA,uBAAAD,CAAA,SAAAA,CAAA;MAAA,UAAAkG,SAAA;IAAA;IAAA,OAAAC,MAAA,CAAAlG,CAAA;EAAA,EAAAA,CAAA;EAAA,0BAAAL,CAAA,GAAAA,CAAA,GAAAuG,MAAA,CAAAvG,CAAA;AAAA;AC/CtC,IAAawG,CAAA,GAAc,UAAAnG,CAAA;EAAA,WAAAA,CAAA,EAAAL,CAAA;IAAA,yBAAAA,CAAA,aAAAA,CAAA,YAAAsG,SAAA;IAAAjG,CAAA,CAAAoG,SAAA,GAAA/B,MAAA,CAAAgC,MAAA,CAAA1G,CAAA,IAAAA,CAAA,CAAAyG,SAAA;MAAAE,WAAA;QAAA9C,KAAA,EAAAxD,CAAA;QAAAuF,QAAA;QAAAD,YAAA;MAAA;IAAA,IAAAjB,MAAA,CAAAe,cAAA,CAAApF,CAAA;MAAAuF,QAAA;IAAA,IAAA5F,CAAA,IAAAkG,CAAA,CAAA7F,CAAA,EAAAL,CAAA;EAAA,EAAAL,CAAA,EAAQ8C,CAAA;EAAR,IAAAzC,CAAA;IAAAE,CAAA;IAAAE,CAAA;IAAAO,CAAA;IAAAE,CAAA,IAAAT,CAAA,GAAAT,CAAA,EAAAgB,CAAA;MAAA,0BAAAiG,OAAA,KAAAA,OAAA,CAAAC,SAAA;MAAA,IAAAD,OAAA,CAAAC,SAAA,CAAAC,IAAA;MAAA,yBAAAC,KAAA;MAAA;QAAA,OAAAC,OAAA,CAAAP,SAAA,CAAAQ,OAAA,CAAAZ,IAAA,CAAAO,OAAA,CAAAC,SAAA,CAAAG,OAAA;MAAA,SAAA3G,CAAA;QAAA;MAAA;IAAA;MAAA,IAAAA,CAAA;QAAAL,CAAA,GAAA6F,CAAA,CAAAzF,CAAA;MAAA,IAAAO,CAAA;QAAA,IAAAT,CAAA,GAAA2F,CAAA,OAAAc,WAAA;QAAAtG,CAAA,GAAAuG,OAAA,CAAAC,SAAA,CAAA7G,CAAA,EAAAmF,SAAA,EAAAjF,CAAA;MAAA,OAAAG,CAAA,GAAAL,CAAA,CAAAiF,KAAA,OAAAE,SAAA;MAAA,iBAAA9E,CAAA,EAAAL,CAAA;QAAA,IAAAA,CAAA,wBAAAA,CAAA,yBAAAA,CAAA,UAAAA,CAAA;QAAA,eAAAA,CAAA,YAAAsG,SAAA;QAAA,iBAAAjG,CAAA;UAAA,eAAAA,CAAA,YAAA6G,cAAA;UAAA,OAAA7G,CAAA;QAAA,EAAAA,CAAA;MAAA,QAAAA,CAAA;IAAA;EAAA,SAAAV,EAAA;IAAA,iBAAAU,CAAA,EAAAL,CAAA;MAAA,MAAAK,CAAA,YAAAL,CAAA,aAAAsG,SAAA;IAAA,QAAA3G,CAAA,GAAAkB,CAAA,CAAAoE,KAAA,OAAAE,SAAA;EAAA;EA8OxB,OAAAnF,CAAA,GA9OwBL,CAAA,GAAAO,CAAA;IAAAmD,GAAA;IAAAQ,KAAA,EAYzB,SAAAA,CAASxD,CAAA;MACP,OAAO,KAAKmC,OAAA,CAAQ2E,UAAA,CAAWC,QAAA,GAAWtG,MAAA,CAAOT,CAAA,CACnD;IAAA;EAAA,GAAC;IAAAgD,GAAA;IAAAQ,KAAA,EAED,SAAAA,CAAA;MAAQ,IAAAxD,CAAA;QACAL,CAAA,GAAc,KAAKqH,OAAA,CAAQ7E,OAAA,CAAQvC,KAAA;QACjCC,CAAA,GAAe,KAAKsC,OAAA,CAApB2E,UAAA;MACR,OAAO;QACL3F,KAAA,EAAO,SAAAA,CAACpB,CAAA,EAAiBO,CAAA;UACvBT,CAAA,CAAWU,OAAA,CAAQ0D,MAAA,CAAO3D,CAAA,EAAS;YACjCuD,GAAA,EAAK9D;UAAA;UAGP,IAAMS,CAAA,GAA0BR,CAAA,CAAKiH,OAAA,CAAQ,UAACjH,CAAA;cAC5CA,CAAA,CAAWkH,MAAA,CAAOnH,CAAA,EAAIO,CAAA,GACtBN,CAAA,CAAWmH,KAAA,CAAMpH,CAAA,EAAIO,CAAA,GACrBN,CAAA,CAAWoB,IAAA,CAAKrB,CAAA,EAAIO,CAAA,CACtB;YAAA;YAEMb,CAAA,GAAkBO,CAAA,CAAKoH,qBAAA,CAC3BrH,CAAA,EACA,aACA,UAACC,CAAA;cACCA,CAAA,CAAEqH,KAAA,CAAMC,eAAA,IACRzH,CAAA,CAAWU,OAAA,CAAQmD,aAAA,CAAc,WAAWpD,CAAA,CAC9C;YAAA;YAGER,CAAA,GAAwC;UAExCE,CAAA,CAAKgH,OAAA,CAAQ7E,OAAA,CAAQoF,uBAAA,KACvBzH,CAAA,GAAmBE,CAAA,CAAKoH,qBAAA,CACtBrH,CAAA,EACA,cACA,UAACC,CAAA;YACCA,CAAA,CAAEqH,KAAA,CAAMC,eAAA,IACRzH,CAAA,CAAWU,OAAA,CAAQmD,aAAA,CAAc,WAAW,KAC9C;UAAA;UAIJ,IAAMzD,CAAA,GAAiBD,CAAA,CAAKoH,qBAAA,CAC1BrH,CAAA,EACA,YACA,UAACA,CAAA;cACCA,CAAA,CAAEsH,KAAA,CAAMC,eAAA,IACRvH,CAAA,CAAEyH,cAAA;cAEF,IAA4ClH,CAAA,GAAAhB,CAAA,CAAcqE,MAAA;gBAAlDnD,CAAA,GAAAF,CAAA,CAAA6D,SAAA;gBAAW1E,CAAA,GAAAa,CAAA,CAAAmH,oBAAA;cAEnB,IAAIhI,CAAA,IAAwBe,CAAA,EAAW;gBACrC,IAAMV,CAAA,GAAUE,CAAA,CAAK0H,QAAA,CACnBjI,CAAA,CAAqBU,EAAA,EACrB2D,UAAA,CAAW6D,qBAAA;gBAEb,IACE5H,CAAA,CAAE6H,OAAA,GAAU9H,CAAA,CAAQ+H,GAAA,GAAM,MAC1B9H,CAAA,CAAE6H,OAAA,GAAU9H,CAAA,CAAQgI,MAAA,GAAS,IAC7B;kBACA,IAAM7H,CAAA,GACJR,CAAA,CAAqBgC,IAAA,CAAKb,KAAA,CACxBnB,CAAA,CAAqBgC,IAAA,CAAKb,KAAA,CAAMmE,MAAA,GAAS;kBAG7C,KAAK9E,CAAA,EAYH,aAVAX,CAAA,CAAcqE,MAAA,CAAOQ,SAAA,GAAAU,CAAA,CAAAA,CAAA,KAChBrE,CAAA,GAAS;oBACZuH,SAAA,EAASlD,CAAA,CAAAA,CAAA,KACJrE,CAAA,CAAUuH,SAAA,GAAS;sBACtBC,KAAA,EAAO;sBACPC,KAAA,EAAO;sBACPC,MAAA,EAAQzI;oBAAA;oBAEV0I,QAAA,GAAU;kBAAA;kBAKd7I,CAAA,CAAcqE,MAAA,CAAOQ,SAAA,GAAAU,CAAA,CAAAA,CAAA,KAChBrE,CAAA,GAAS;oBACZuH,SAAA,EAAW;sBACTK,WAAA,EAAazI,CAAA,CAAY0I,KAAA,CAAMxH,IAAA,CAAKZ,CAAA,EAAUqI,GAAA;sBAC9CN,KAAA,EAAOvI,CAAA,CAAqBgC,IAAA,CAAKb,KAAA,CAAMmE,MAAA;sBACvCkD,KAAA,EAAO;sBACPC,MAAA,EAAQzI;oBAAA;oBAEV0I,QAAA,GAAU;kBAAA,IAGZtI,CAAA,CAAWU,OAAA,CAAQ2D,YAAA,CAAa5E,CAAA,CAAcqE,MAAA,CAAOQ,SAAA,CACvD;gBAAA;cACF;YACF;YAGIpD,CAAA,GAAkBf,CAAA,CAAKoH,qBAAA,CAC3BrH,CAAA,EACA,aACA,UAACA,CAAA;cACCA,CAAA,CAAEsH,KAAA,CAAMC,eAAA,IACRvH,CAAA,CAAEyH,cAAA;cAEF,IAAMhH,CAAA,GAASlB,CAAA,CAAciJ,cAAA;cAE7B,IAAK/H,CAAA,EAAL;gBAEA,IAEMf,CAAA,GAAgBE,CAAA,CAAY0I,KAAA,CAAMG,kBAAA,CACtChI,CAAA,EAHWF,CAAA,EAKX;kBAAEmC,CAAA,EAAG1C,CAAA,CAAE0I,OAAA;kBAASpG,CAAA,EAAGtC,CAAA,CAAE6H;gBAAA,GACrB,UAACjI,CAAA;kBACC,IAAME,CAAA,GAAQG,CAAA,CAAK0H,QAAA,CAAS/H,CAAA,CAAKQ,EAAA;kBACjC,OAAON,CAAA,IAASA,CAAA,CAAMgE,GACxB;gBAAA;gBAGF,IAAIpE,CAAA,EAAe;kBACjB,IACeK,CAAA,GACXL,CAAA,CADFsI,SAAA,CAAaG,MAAA;oBAETjI,CAAA,GAAoBD,CAAA,CAAK0H,QAAA,CAC7B5H,CAAA,CAAOK,EAAA,EACP2D,UAAA,CAAW6D,qBAAA;kBAGb,IADArI,CAAA,CAAcqE,MAAA,CAAO8D,oBAAA,GAAuB,MACxC9H,CAAA,CAAY0I,KAAA,CAAMxH,IAAA,CAAKf,CAAA,CAAOK,EAAA,EAAIuI,QAAA,MAChC5I,CAAA,CAAO2B,IAAA,CAAKyG,MAAA,EAAQ;oBACtB,IAAMnH,CAAA,GAAcpB,CAAA,CAAY0I,KAAA,CAC7BxH,IAAA,CAAKf,CAAA,CAAO2B,IAAA,CAAKyG,MAAA,EACjBI,GAAA;oBACC3I,CAAA,CAAY0I,KAAA,CAAMxH,IAAA,CAAKE,CAAA,CAAYZ,EAAA,EAAIuI,QAAA,OACzCpJ,CAAA,CAAcqE,MAAA,CAAO8D,oBAAA,GAAuB3H,CAAA,GAEzCC,CAAA,CAAE6H,OAAA,GAAU3H,CAAA,CAAkB6H,MAAA,GAAS,OACrC9H,CAAA,CAAK0H,QAAA,CAAS5H,CAAA,CAAOK,EAAA,EAAIqB,QAAA,IAC5BzB,CAAA,CAAE6H,OAAA,GAAU3H,CAAA,CAAkB4H,GAAA,GAAM,QAEpCpI,CAAA,CAAcsI,SAAA,CAAUG,MAAA,GAASnH,CAAA,EACjCtB,CAAA,CAAcsI,SAAA,CAAUK,WAAA,GAActI,CAAA,EACtCL,CAAA,CAAcsI,SAAA,CAAUC,KAAA,GAAQjH,CAAA,CAAYU,IAAA,CAAKb,KAAA,GAC7CG,CAAA,CAAYU,IAAA,CAAKb,KAAA,CAAM+H,OAAA,CAAQ7I,CAAA,CAAOK,EAAA,IACtC,GAEFJ,CAAA,CAAE6H,OAAA,GAAU3H,CAAA,CAAkB6H,MAAA,GAAS,OACtC9H,CAAA,CAAK0H,QAAA,CAAS5H,CAAA,CAAOK,EAAA,EAAIqB,QAAA,GAE1B/B,CAAA,CAAcsI,SAAA,CAAUE,KAAA,GAAQ,UACvBlI,CAAA,CAAE6H,OAAA,GAAU3H,CAAA,CAAkB4H,GAAA,GAAM,OAC7CpI,CAAA,CAAcsI,SAAA,CAAUE,KAAA,GAAQ,WAIxC;kBAAA;kBAGF3I,CAAA,CAAcqE,MAAA,CAAOQ,SAAA,GAAAU,CAAA,CAAAA,CAAA,KAChBpF,CAAA,GAAa;oBAChB0I,QAAA,GAAU;kBAAA,IAGZtI,CAAA,CAAWU,OAAA,CAAQ2D,YAAA,CAAa5E,CAAA,CAAcqE,MAAA,CAAOQ,SAAA,CACvD;gBAAA;cA3Da;YA4Df;UAGF,OAAO;YACL3D,CAAA,IACAf,CAAA,IACAQ,CAAA,IACAc,CAAA,IAEKjB,CAAA,IAILA,CAAA;UAAA,CAEH;QAAA;QACDuB,WAAA,EAAa,SAAAA,CAACrB,CAAA,EAAiBL,CAAA;UAC7BE,CAAA,CAAWU,OAAA,CAAQ0D,MAAA,CAAOtE,CAAA,EAAS;YACjCmE,UAAA,EAAY9D;UAAA,EAEf;QAAA;QACDoB,IAAA,EAAM,SAAAA,CAACrB,CAAA,EAAiBO,CAAA;UACtBP,CAAA,CAAG6I,YAAA,CAAa,aAAa;UAE7B,IAAMpI,CAAA,GAAkBR,CAAA,CAAKoH,qBAAA,CAC3BrH,CAAA,EACA,aACA,UAACC,CAAA;cACCA,CAAA,CAAEqH,KAAA,CAAMC,eAAA,IACRhI,CAAA,CAAciJ,cAAA,GAAiBjI,CACjC;YAAA;YAGIb,CAAA,GAAgBO,CAAA,CAAKoH,qBAAA,CAAsBrH,CAAA,EAAI,WAAW,UAACC,CAAA;cAC/DA,CAAA,CAAEqH,KAAA,CAAMC,eAAA;cACR,IAAMvH,CAAA,GAAST,CAAA,CAAcqE,MAAA;cAE7B,IAAI5D,CAAA,CAAOoE,SAAA,KAAcpE,CAAA,CAAOoE,SAAA,CAAU0E,KAAA,EAAO;gBAC/C,IAAQvI,CAAA,GAAcP,CAAA,CAAOoE,SAAA,CAArB4D,SAAA;gBAIRpI,CAAA,CAAYY,OAAA,CAAQuI,IAAA,CAClBxJ,CAAA,CAAciJ,cAAA,EAJiBjI,CAAA,CAAzB4H,MAAA,CACA/H,EAAA,EADyBG,CAAA,CAAjB0H,KAAA,IAMK,YANY1H,CAAA,CAAV2H,KAAA,GAMQ,IAAI,GAErC;cAAA;cAEA3I,CAAA,CAAciJ,cAAA,GAAiB,MAC/BjJ,CAAA,CAAcqE,MAAA,CAAOQ,SAAA,GAAY,MACjCtE,CAAA,CAAWU,OAAA,CAAQ2D,YAAA,CAAa,KAClC;YAAA;UAEA,OAAO;YACLnE,CAAA,CAAGgJ,eAAA,CAAgB,cACnBvI,CAAA,IACAf,CAAA;UAAA,CAEJ;QAAA;MAAA,CAEJ;IAAA;EAAA,iBAAAO,CAAA,EAAAL,CAAA;IAAA,SAAAE,CAAA,MAAAA,CAAA,GAAAF,CAAA,CAAAoF,MAAA,EAAAlF,CAAA;MAAA,IAAAE,CAAA,GAAAJ,CAAA,CAAAE,CAAA;MAAAE,CAAA,CAAA2E,UAAA,GAAA3E,CAAA,CAAA2E,UAAA,QAAA3E,CAAA,CAAAuF,YAAA,kBAAAvF,CAAA,KAAAA,CAAA,CAAAwF,QAAA,QAAAlB,MAAA,CAAAe,cAAA,CAAApF,CAAA,EAAAqF,CAAA,CAAAtF,CAAA,CAAAiD,GAAA,GAAAjD,CAAA;IAAA;EAAA,EAAAJ,CAAA,CAAAyG,SAAA,EAAAvG,CAAA,GAAAwE,MAAA,CAAAe,cAAA,CAAAzF,CAAA;IAAA4F,QAAA;EAAA,IAACjG,CAAA;AAAA,CA9OwB;AAAA2F,CAAA,CAAdkB,CAAA,EAAc,2BAAAlB,CAAA,CAAdkB,CAAA,EAOP;EACFhC,SAAA,EAAW;EACXsD,oBAAA,EAAsB;AAAA;ACHnB,MAAMuB,CAAA,GAAuBC,CAAA;IAClCvI,QAAA,EAAAV;EAAA;IAEA;QAAMS,MAAA,EAAEd,CAAA;QAAMgE,MAAA,EAAE5D;MAAA,IAAWL,CAAA,CAAiBM,CAAA,IAAUA,CAAA;MAAA;QAChDqI,KAAA,EAAE/H;MAAA,IAAUK,CAAA,CAAWX,CAAA,KAAK;QAAQkJ,OAAA,EAASlJ,CAAA,CAAMmC,OAAA,CAAQ+G;MAAA;MAAA;QACzD/E,SAAA,EAAW3D;MAAA,IAAoBF,CAAA,CAAM6I,UAAA;MAEvC1J,CAAA,GAAoBQ,CAAA,CAAQ;QAChC;UAAMkE,SAAA,EAAEnE;QAAA,IAAcD,CAAA;QAEtB,IAAIC,CAAA,EAAW;UACb;cACE+H,SAAA;gBAAWE,KAAA,EAAEpI,CAAA;gBAAKqI,MAAA,EAAEnI,CAAA;gBAAMqI,WAAA,EAAE9H;cAAA;cAAauI,KAAA,EACzCvJ;YAAA,IACEU,CAAA;YACEP,CAAA,GAAUa,CAAA,GAAcA,CAAA,CAAYH,EAAA,GAAKJ,CAAA,CAAOI,EAAA;UAEtD,IAAIL,CAAA;UACJ,MAAMG,CAAA,GAAQX,CAAA,GAAQkB,CAAA,CAAgBqI,KAAA,GAAQrI,CAAA,CAAgB4I,OAAA;UAE9D,IAAIpJ,CAAA,CAAUmI,QAAA,IAAqC,QAAzBxI,CAAA,CAAOI,CAAA,CAAOI,EAAA,EAAI0D,GAAA,EAAa;YACvD,MAAM7D,CAAA,GAAYL,CAAA,CAAOI,CAAA,CAAOI,EAAA,EAAI0D,GAAA,CAAI8D,qBAAA;cAClC9H,CAAA,GAAmBF,CAAA,CACvBI,CAAA,CAAOI,EAAA,EACP2D,UAAA,CAAW6D,qBAAA;YACb,OAAO;cACLE,GAAA,EAAKhI,CAAA,CAAiBgI,GAAA;cACtBwB,IAAA,EAAMrJ,CAAA,CAAUqJ,IAAA;cAChBC,KAAA,EAAOtJ,CAAA,CAAUsJ,KAAA;cACjBC,MAAA,EAAQ1J,CAAA,CAAiB0J,MAAA;cACzBC,UAAA,EAAY;cACZC,WAAA,EAAa;cACbC,WAAA,EAAazJ;YAAA,CAEhB;UAAA;UAAM;YACL,KAAKN,CAAA,CAAOF,CAAA,GAAU;YACtB,MAAMO,CAAA,GAAaL,CAAA,CAAOF,CAAA,EAASqE,UAAA,CAAW6D,qBAAA;cACxC5H,CAAA,GAAMJ,CAAA,CAAOF,CAAA,EAASoE,GAAA,CAAI8D,qBAAA;YAQhC,OAHE7H,CAAA,GAHY,YAAVD,CAAA,IAAsBS,CAAA,GAGlBP,CAAA,CAAI8H,GAAA,GAFJ9H,CAAA,CAAI8H,GAAA,GAAM9H,CAAA,CAAIwJ,MAAA,EAKf;cACL1B,GAAA,EAAA/H,CAAA;cACAuJ,IAAA,EAAMrJ,CAAA,CAAWqJ,IAAA;cACjBC,KAAA,EAAOvJ,CAAA,CAAIuJ,KAAA,GAAQvJ,CAAA,CAAIsJ,IAAA,GAAOrJ,CAAA,CAAWqJ,IAAA;cACzCE,MAAA,EAAQ;cACRE,WAAA,EAAa;cACbD,UAAA,EAAYvJ;YAAA,CAEf;UAAA;QACF;MAAA,GACA,CAACF,CAAA,EAAQS,CAAA,CAAgBqI,KAAA,EAAOrI,CAAA,CAAgB4I,OAAA,EAASzJ,CAAA;IAE5D,OACEL,CAAA,CAAAsD,aAAA,cACG7C,CAAA,CAAOoE,SAAA,GACJ7E,CAAA,CAAMsD,aAAA,CAAc/C,CAAA,EAAiB;MACnC8J,KAAA,EAAOlK;IAAA,KAET,MACHO,CAAA,CAEH;EAAA;ECnES4J,CAAA,GAA4BC,CAAA;IAAGnJ,QAAA,EAAAV;EAAA;IAC1C;QAAQJ,KAAA,EAAOD;MAAA,IAAeD,CAAA;MACxBG,CAAA,GAAmBwC,CAAA;MAEnBtC,CAAA,GAAUE,CAAA,CACd,MACEJ,CAAA,CAAiBiK,MAAA,CAAO3D,CAAA,EAAe;QACrCW,UAAA,EAAAnH;MAAA,IAEJ,CAACE,CAAA,EAAkBF,CAAA;IAGrB,OACEL,CAAA,CAAAsD,aAAA,CAACK,CAAA,CAAyBM,QAAA,EAAS;MAAAC,KAAA,EAAOzD;IAAA,GACxCT,CAAA,CAAAsD,aAAA,CAACoG,CAAA,EAAuB,OACvBhJ,CAAA,CAEH;EAAA;ECpBS+J,CAAA,GAAoBC,CAAA;IAC/B;QAAM7J,EAAA,EAAEH;MAAA,IAAOE,CAAA;MAAA;QAET+J,WAAA,EAAEtK,CAAA;QAAWY,OAAA,EAAEV;MAAA,IAAYc,CAAA,CAAWhB,CAAA,KAAW;QACrDsK,WAAA,EACEtK,CAAA,CAAMiB,KAAA,CAAMZ,CAAA,KAAOL,CAAA,CAAMiB,KAAA,CAAMZ,CAAA,EAAIyB,IAAA,CAAKyI,MAAA,CAAOD,WAAA,GAC3CtK,CAAA,CAAMiB,KAAA,CAAMZ,CAAA,EAAIyB,IAAA,CAAKyI,MAAA,CAAOD,WAAA,GAC5BtK,CAAA,CAAMiB,KAAA,CAAMZ,CAAA,EAAIyB,IAAA,CAAKwI,WAAA;QAC3BE,MAAA,EAAQxK,CAAA,CAAMiB,KAAA,CAAMZ,CAAA,KAAOL,CAAA,CAAMiB,KAAA,CAAMZ,CAAA,EAAIyB,IAAA,CAAK0I;MAAA;MAAA,CAG3CpK,CAAA,EAAaO,CAAA,IAAkBS,CAAA,EAAS;MACzCP,CAAA,GAAU+B,CAAA,CAA2B;MAErC9C,CAAA,GAAeyC,CAAA,CAAalC,CAAA;QAC5BQ,CAAA,CAAQgC,OAAA,KAAYhC,CAAA,CAAQgC,OAAA,CAAQ4H,QAAA,CAASpK,CAAA,CAAEqK,MAAA,KACjD/J,CAAA,EAAe,EAChB;MAAA,GACA;IAQH,OANAqC,CAAA,CAAU,MACD;MACL2H,MAAA,CAAOC,mBAAA,CAAoB,SAAS9K,CAAA,CAAa;IAAA,GAElD,CAACA,CAAA,IAGFH,CAAA,CAACsD,aAAA,CAAAH,CAAA;MACC+H,IAAA,EAAM7K,CAAA;MACN8K,QAAA,GAAW1K,CAAA;MACX2K,GAAA,EAAM1K,CAAA;QACAA,CAAA,KACFQ,CAAA,CAAQgC,OAAA,GAAUxC,CAAA,CAAI2K,EAAA,CAAGnI,OAAA,EACzB8H,MAAA,CAAOC,mBAAA,CAAoB,SAAS9K,CAAA,GACpC6K,MAAA,CAAOM,gBAAA,CAAiB,SAASnL,CAAA,EAClC;MAAA;MAEHoL,QAAA,EAAWlL,CAAA;QACTE,CAAA,CAAQiL,SAAA,CACN9K,CAAA,EACCA,CAAA,IAAYA,CAAA,CAAOiK,WAAA,GAActK,CAAA,CAAE0K,MAAA,CAAO7G,KAAA,CAC5C;MAAA;MAEHuH,OAAA,EAAQ;MACRC,aAAA,EAAeA,CAAA;QACRjL,CAAA,IAAaO,CAAA,EAAe,EAAK;MAAA;IAAA,EAG1C;EAAA;ACtDJ,IAAI2K,CAAA;AACJ,SAASC,EAAA;EAAiS,OAApRA,CAAA,GAAW7G,MAAA,CAAO8G,MAAA,GAAS9G,MAAA,CAAO8G,MAAA,CAAOxF,IAAA,KAAS,UAAU3F,CAAA;IAAU,KAAK,IAAIL,CAAA,GAAI,GAAGA,CAAA,GAAImF,SAAA,CAAUC,MAAA,EAAQpF,CAAA,IAAK;MAAE,IAAIE,CAAA,GAASiF,SAAA,CAAUnF,CAAA;MAAI,KAAK,IAAII,CAAA,IAAOF,CAAA,EAAcwE,MAAA,CAAO+B,SAAA,CAAUgF,cAAA,CAAepF,IAAA,CAAKnG,CAAA,EAAQE,CAAA,MAAQC,CAAA,CAAOD,CAAA,IAAOF,CAAA,CAAOE,CAAA;IAAA;IAAY,OAAOC,CAAS;EAAA,GAASkL,CAAA,CAAStG,KAAA,CAAM,MAAME,SAAA,CAAa;AAAA;AAEnV,ICHIuG,CAAA;EAAOC,CAAA;EDGPC,CAAA,GAAW,SAAAC,CAAkBxL,CAAA;IAC/B,OAAoBQ,CAAA,CAAMoC,aAAA,CAAc,OAAOsI,CAAA,CAAS;MACtDO,KAAA,EAAO;MACPC,OAAA,EAAS;IAAA,GACR1L,CAAA,GAAQiL,CAAA,KAAUA,CAAA,GAAqBzK,CAAA,CAAMoC,aAAA,CAAc,QAAQ;MACpEnD,CAAA,EAAG;IAAA,IAEP;EAAA;ACTA,SAASkM,EAAA;EAAiS,OAApRA,CAAA,GAAWtH,MAAA,CAAO8G,MAAA,GAAS9G,MAAA,CAAO8G,MAAA,CAAOxF,IAAA,KAAS,UAAU3F,CAAA;IAAU,KAAK,IAAIL,CAAA,GAAI,GAAGA,CAAA,GAAImF,SAAA,CAAUC,MAAA,EAAQpF,CAAA,IAAK;MAAE,IAAIE,CAAA,GAASiF,SAAA,CAAUnF,CAAA;MAAI,KAAK,IAAII,CAAA,IAAOF,CAAA,EAAcwE,MAAA,CAAO+B,SAAA,CAAUgF,cAAA,CAAepF,IAAA,CAAKnG,CAAA,EAAQE,CAAA,MAAQC,CAAA,CAAOD,CAAA,IAAOF,CAAA,CAAOE,CAAA;IAAA;IAAY,OAAOC,CAAS;EAAA,GAAS2L,CAAA,CAAS/G,KAAA,CAAM,MAAME,SAAA,CAAa;AAAA;AAEnV,ICHI8G,CAAA;EAAOC,CAAA;EDGPC,CAAA,GAAS,SAAAC,CAAgB/L,CAAA;IAC3B,OAAoBQ,CAAA,CAAMoC,aAAA,CAAc,OAAO+I,CAAA,CAAS;MACtDF,KAAA,EAAO;MACPC,OAAA,EAAS;MACTpC,KAAA,EAAO;MACPC,MAAA,EAAQ;IAAA,GACPvJ,CAAA,GAAQqL,CAAA,KAAUA,CAAA,GAAqB7K,CAAA,CAAMoC,aAAA,CAAc,QAAQ;MACpEoJ,IAAA,EAAM;MACNvM,CAAA,EAAG;IAAA,KACA6L,CAAA,KAAWA,CAAA,GAAsB9K,CAAA,CAAMoC,aAAA,CAAc,QAAQ;MAChEnD,CAAA,EAAG;IAAA,IAEP;EAAA;ACdA,SAASwM,EAAA;EAAiS,OAApRA,CAAA,GAAW5H,MAAA,CAAO8G,MAAA,GAAS9G,MAAA,CAAO8G,MAAA,CAAOxF,IAAA,KAAS,UAAU3F,CAAA;IAAU,KAAK,IAAIL,CAAA,GAAI,GAAGA,CAAA,GAAImF,SAAA,CAAUC,MAAA,EAAQpF,CAAA,IAAK;MAAE,IAAIE,CAAA,GAASiF,SAAA,CAAUnF,CAAA;MAAI,KAAK,IAAII,CAAA,IAAOF,CAAA,EAAcwE,MAAA,CAAO+B,SAAA,CAAUgF,cAAA,CAAepF,IAAA,CAAKnG,CAAA,EAAQE,CAAA,MAAQC,CAAA,CAAOD,CAAA,IAAOF,CAAA,CAAOE,CAAA;IAAA;IAAY,OAAOC,CAAS;EAAA,GAASiM,CAAA,CAASrH,KAAA,CAAM,MAAME,SAAA,CAAa;AAAA;AAEnV,IAAIoH,CAAA,GAAY,SAAAC,CAAmBnM,CAAA;EACjC,OAAoBQ,CAAA,CAAMoC,aAAA,CAAc,OAAOqJ,CAAA,CAAS;IACtDR,KAAA,EAAO;IACPC,OAAA,EAAS;EAAA,GACR1L,CAAA,GAAQ4L,CAAA,KAAUA,CAAA,GAAqBpL,CAAA,CAAMoC,aAAA,CAAc,QAAQ;IACpEC,SAAA,EAAW;IACXpD,CAAA,EAAG;EAAA,KACAoM,CAAA,KAAWA,CAAA,GAAsBrL,CAAA,CAAMoC,aAAA,CAAc,QAAQ;IAChEC,SAAA,EAAW;IACXpD,CAAA,EAAG;EAAA,IAEP;AAAA;ACHA,MAAM2M,CAAA,GAAY9J,CAAA,CAAO+J,GAA2C;;;;;gBAKnDrM,CAAA,IAAWA,CAAA,CAAMsM,SAAA,GAAY,YAAY;WAC9CtM,CAAA,IAAWA,CAAA,CAAMsM,SAAA,GAAY,SAAS;;YAErCtM,CAAA,IAAWA,CAAA,CAAMsM,SAAA,GAAY,SAAS;;;;;;;;;qBAS7BtM,CAAA,IAAyB,KAAfA,CAAA,CAAMuM,MAAA;;;;;;;;;;;;EAahCC,CAAA,GAASlK,CAAA,CAAOhC,CAAyB;;;;;;;;sBAQxBN,CAAA,IAAWA,CAAA,CAAMyM,SAAA,GAAY,MAAM;;;;EAKpDC,CAAA,GAAOpK,CAAA,CAAOhC,CAA6C;;;;;;;;;;;;eAYjDN,CAAA,IAAWA,CAAA,CAAM2M,SAAA,GAAY,KAAM;;;;;cAKpC3M,CAAA,IAAWA,CAAA,CAAM2M,SAAA,GAAY,MAAM;;;;kBAI/B3M,CAAA,IAAWA,CAAA,CAAMsM,SAAA,GAAY,SAAS;;;;eAIzCtM,CAAA,IAAWA,CAAA,CAAM2M,SAAA,GAAY,KAAM;;;EAI7CC,CAAA,GAAoBtK,CAAA,CAAO+J,GAAG;;;;;;;;;EAUvBQ,EAAA,GAAqBC,CAAA;IAChC;QAAM3M,EAAA,EACJH,CAAA;QAAEI,KAAA,EACFT,CAAA;QAAK6B,QAAA,EACL3B,CAAA;QAAQa,QAAA,EACRX,CAAA;QACAM,UAAA;UAAYe,IAAA,EAAEd,CAAA;UAAIe,WAAA,EAAEb;QAAA;QACpBD,OAAA;UAASS,WAAA,EAAEvB;QAAA;MAAA,IACTS,CAAA,CAAUF,CAAA,KACL;QACLwB,QAAA,EAAUxB,CAAA,CAAMwB;MAAA;MAAA;QAId2I,MAAA,EAAErK,CAAA;QAAMS,OAAA,EAAEN,CAAA;QAAO8D,QAAA,EAAEhD,CAAA;QAAQgM,QAAA,EAAE7L;MAAA,IAAaP,CAAA,CAAU,CAAChB,CAAA,EAAOE,CAAA;QAEhE,MAAME,CAAA,GAAWF,CAAA,CAAM8B,QAAA,CAAS,YAAYC,KAAA,OAAY5B,CAAA;QAExD,OAAO;UACLmK,MAAA,EAAQxK,CAAA,CAAMiB,KAAA,CAAMZ,CAAA,KAAOL,CAAA,CAAMiB,KAAA,CAAMZ,CAAA,EAAIyB,IAAA,CAAK0I,MAAA;UAChDpG,QAAA,EAAAhE,CAAA;UACAgN,QAAA,EAAUlN,CAAA,CAAMgB,IAAA,CAAKb,CAAA,EAAIgN,gBAAA;QAAA,CAC1B;MAAA;IAGH,OACE1N,CAAA,CAACsD,aAAA,CAAAwJ,CAAA,EACY;MAAAE,SAAA,EAAAvL,CAAA;MACX2J,GAAA,EAAM1K,CAAA;QACJM,CAAA,CAAKN,CAAA,CAAI;MAAA;MAAAuM,MAAA,EAEH5M;IAAA,GAERL,CAAA,CAAAsD,aAAA,CAAC8J,CAAA,EACY;MAAAJ,SAAA,EAAAvL,CAAA;MAAA4L,SAAA,EACA7M,CAAA;MACXmN,OAAA,EAASA,CAAA,KAAMhN,CAAA,CAAQiN,SAAA,CAAUlN,CAAA,GAAKF,CAAA;IAAA,GAEtCR,CAAA,CAACsD,aAAA,CAAAkJ,CAAA,UAEHxM,CAAA,CAAKsD,aAAA;MAAAC,SAAA,EAAU;IAAA,GACbvD,CAAA,CAAAsD,aAAA;MACE8H,GAAA,EAAM1K,CAAA;QACJQ,CAAA,CAAYR,CAAA,CAAI;MAAA;IAAA,GAGjBkB,CAAA,GACC5B,CAAA,CAAAsD,aAAA,CAACgK,CAAA,EAAiB,MAChBtN,CAAA,CAAAsD,aAAA,CAACsJ,CAAA,EAAS,SAEV,MAEJ5M,CAAA,CAAKsD,aAAA;MAAAC,SAAA,EAAU;IAAA,GACbvD,CAAA,CAACsD,aAAA,CAAAmH,CAAA,UAEHzK,CAAA,CACGsD,aAAA,cAAA7C,CAAA,IAAYA,CAAA,CAASgF,MAAA,GACpBzF,CAAA,CAAAsD,aAAA,CAAC4J,CAAA,EAAkB;MAAAC,SAAA,EAAA5M,CAAA;MAAUsN,WAAA,EAAaA,CAAA,KAAM1N,CAAA;IAAA,GAC9CH,CAAA,CAAAsD,aAAA,CAAC2I,CAAA,EAAK,SAEN,QAKZ;EAAA;ECtJE6B,EAAA,GAAe9K,CAAA,CAAO+J,GAI1B;gBACerM,CAAA,IAAWA,CAAA,CAAMqN,QAAA,GAAW,YAAY;;oBAEpCrN,CAAA,IACjBA,CAAA,CAAMsN,YAAA,IAAgBtN,CAAA,CAAMyM,SAAA,GAAY,IAAI;;EAG1Cc,EAAA,GAAgBjL,CAAA,CAAO+J,GAA8B;kBACxCrM,CAAA,IAAWA,CAAA,CAAMsN,YAAA,GAAe,KAAK;gBACvCtN,CAAA,IACbA,CAAA,CAAMsN,YAAA,GAAe,8BAA8B;;;IAGlDtN,CAAA,IACDA,CAAA,CAAMsN,YAAA,GACF,uUAiBA;;EAOKE,EAAA,GAAeC,CAAA;IAAG/M,QAAA,EAAAV;EAAA;IAC7B;QAAMG,EAAA,EACJR,CAAA;QAAE6B,QAAA,EACF3B,CAAA;QAAQmE,OAAA,EACRjE,CAAA;QACAM,UAAA;UAAYc,KAAA,EAAEb;QAAA;MAAA,IACZJ,CAAA,CAAUF,CAAA,KAAW;QACvBgE,OAAA,EAAShE,CAAA,CAAM4D,KAAA,CAAMI,OAAA;QACrBxC,QAAA,EAAUxB,CAAA,CAAMwB;MAAA;MAAA;QAEZkM,gBAAA,EAAElN;MAAA,IAAqBG,CAAA,CAAU,CAACX,CAAA,EAAOH,CAAA,MACtC;QACL6N,gBAAA,EAAkB7N,CAAA,CAAMgB,IAAA,CAAKlB,CAAA,EAAIgO,uBAAA;MAAA;IAIrC,OACErO,CAAA,CAAAsD,aAAA,CAACwK,EAAA,EAAY;MACX1C,GAAA,EAAM1K,CAAA;QACJM,CAAA,CAAMN,CAAA,CAAI;MAAA;MAEDyM,SAAA,EAAA5M,CAAA;MACGyN,YAAA,EAAA9M,CAAA;MAAA6M,QAAA,EACJtN;IAAA,GAEVT,CAAA,CAAAsD,aAAA,CAACiK,EAAA,EAAqB,OACrB7M,CAAA,GACCV,CAAA,CAAAsD,aAAA,CAAC2K,EAAA,EAAa;MAAAD,YAAA,EACE9M,CAAA;MACdqC,SAAA,EAAU;IAAA,GAET7C,CAAA,IAED,KAEN;EAAA;ECvES4N,EAAA,GAAuBC,CAAA;IAClCnN,QAAA,EAAAV,CAAA;IACAmC,OAAA,EAAAxC;EAAA;IAGA,MAAME,CAAA,GAAQE,CAAA,CAAW0D,CAAA,EAAc;MACrChD,MAAA,EAAQ,CAAE;MACVkD,MAAA,EAAQ;QACNI,QAAA,EAAU;QACV+J,OAAA,EAAS;QACT9J,OAAA,EAAS;MAAA;MAEX7B,OAAA,EAAS;QACPH,WAAA,EAAawL,EAAA;QAAA,GACV7N;MAAA;IAAA;IAIP,OACEL,CAAA,CAACsD,aAAA,CAAApD,CAAA,CAAoB+D,QAAA;MAASC,KAAA,EAAO;QAAE5D,KAAA,EAAAC;MAAA;IAAA,GACrCP,CAAA,CAAAsD,aAAA,CAACgH,CAAA,EAA2B,MAAA5J,CAAA,EAE9B;EAAA;ECtBS+N,EAAA,GAASC,CAAA;IAAA,GAAMhO;EAAA,MAExBV,CAAA,CAACsD,aAAA,CAAAgL,EAAA,EAAqB;IAAAzL,OAAA,EAASnC;EAAA,GAC7BV,CAAA,CAAAsD,aAAA,CAACG,CAAA,EAAoB;IAAC5C,EAAA,EAAIG,CAAA;IAAWF,KAAA,EAAO;EAAA;AAAA,SAAAoN,EAAA,IAAAC,YAAA,EAAAZ,EAAA,IAAAC,kBAAA,EAAA/C,CAAA,IAAAC,iBAAA,EAAA+D,EAAA,IAAAC,MAAA,EAAA9N,CAAA,IAAA+N,QAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}